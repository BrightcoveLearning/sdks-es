---
title: 'Complemento Cast para el SDK nativo para Android'
description: En este tema, aprenderá a transmitir sus videos a un televisor conectado a Chromecast, utilizando el complemento Cast para Brightcove Native SDK para Android.
parent: Connected TV 
grandparent: Android Development
layout: staging
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">Descripción general</h2>

<p>Con <a href="https://developers.google.com/cast/docs/developers">Google Cast</a> tecnología, puede iniciar y controlar el contenido de video transmitido desde sus dispositivos móviles a televisores de alta definición y sistemas de audio en el hogar. Desde su aplicación, toque el botón Transmitir para transmitir su contenido en una pantalla grande.</p>

<p>Para crear una aplicación Cast, necesita los siguientes componentes:</p>

<ul>
	<li>
	<p>A <strong>solicitud de remitente</strong> - Esto reside en su dispositivo móvil y detecta dispositivos receptores, establece una conexión segura y refleja su contenido. La aplicación del remitente es el reproductor local que se utiliza para transmitir contenido a la aplicación del receptor en su dispositivo Chromecast. Después de enviar contenido a la aplicación del receptor, puede pensar en él como un control remoto para Chromecast.</p>

	<p>La aplicación de remitente la proporciona el complemento Cast para Brightcove Native SDK para Android. Lo aprenderá en este tema.</p>
	</li>
	<li>
	<p>A <strong>aplicación del receptor</strong> - Esta aplicación se ejecuta en el dispositivo Chromecast. Se puede considerar como una aplicación HTML de una sola página con elementos CSS y JavaScript.</p>

	<p>Para realizar la prueba, siga estos pasos:</p>

	<ol class="bcls-tasklist">
		<li>Empezar con <a href="https://github.com/googlecast/CastReceiver">Receptor de transmisión de muestra de Google</a></li>
		<li>Revisar <a href="https://developers.google.com/cast/docs/sample-apps#castreceiver">Aplicaciones de Google Cast</a> documentación</li>
	</ol>

	<p>Para uso en producción, este documento ilustrará cómo utilizar Brightcove Receiver v2.0.0.</p>
	</li>
</ul>

<aside class="bcls-aside bcls-aside--information">
  <p>Notas:</p>
  <ol>
    <li>Google no admite el uso de su aplicación de receptor de demostración en un entorno de producción.</li>
    <li>El complemento Cast para Brightcove Native SDK para Android no proporciona la funcionalidad de la aplicación receptora.</li>
  </ol>
  </aside>
</section>

<section class="bcls-section">
<h2 id="Supported_SDK_version">Versión de SDK compatible</h2>
<p>Para usar el complemento Cast con el nuevo Brightcove Receiver v2.0, debe usar Brightcove Native SDK para Android versión 6.16.0 y superior.</p>
</section>

<section class="bcls-section">
<h2 id="Understanding_the_Cast_plugin">Comprender el complemento Cast</h2>
<p>El complemento Cast está construido sobre el <a href="https://medium.com/google-exoplayer/new-cast-extension-and-demo-app-55816a50012">nueva extensión ExoPlayer Cast</a> y el marco de transmisión de servicios de Google Play. Después de agregar la dependencia del complemento de transmisión, gradle extraerá la dependencia de Play Services Cast Framework, la dependencia de ExoPlayer Cast Extension junto con otras dependencias necesarias.</p>

<p>El complemento Cast se ha rediseñado para minimizar su esfuerzo al integrarse con Video Cloud. Al utilizar Video Cloud, el <code translate="No">BrightcoveCastMediaManager</code> La clase recopila información de la respuesta de Video Cloud, como Brightcove <code translate="No">Video</code> y <code translate="No">Source</code> objetos, cada vez que el <code translate="No">EventType.SET_SOURCE</code> se emite el evento. Esta información se almacena en caché y está lista para usar cuando el usuario selecciona reproducir para poner el video en cola.</p>
</section>

<section class="bcls-section">
<h2 id="Integrating_the_Cast_plugin">Integrando el complemento Cast</h2>
<p>Hay dos formas de integrar su aplicación con el complemento Native SDK para Android Cast. Puede integrarse con Brightcove Cast Receiver v2.0 o con Google Cast Demo Receiver.</p>
<p>Para cualquier integración, debe agregar esta dependencia a su proyecto de aplicación:</p>
<pre>
<code class="language-java" translate="No">implementation &quot;com.brightcove.player:android-cast-plugin:6.16.0&quot;</code></pre>

<h3 id="Using_the_Brightcove_Cast_Receiver_v2">Uso del receptor Brightcove Cast v2.0</h3>
<p>Esta integración está destinada a los clientes de Brightcove que utilizan las API de Brightcove para entregar su contenido.</p>
<p>Para obtener una muestra de código completa, consulte la <a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/BasicCastBrightcoveReceiverSampleApp">BasicCastBrightcoveReceiverSampleApp</a>.</p>

<h3 id="Using_the_Google_Cast_Demo_Receiver">Uso del receptor de demostración de Google Cast</h3>
<p>Esta integración está destinada a los clientes de Brightcove que son nuevos en la fundición.</p>
<p>Para obtener una muestra de código completa, consulte la <a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/BasicCastGoogleReceiverSampleApp">BasicCastGoogleReceiverSampleApp</a>.</p>
<aside class="bcls-aside bcls-aside--tip">los <strong>BasicCastGoogleReceiverSampleApp</strong> La aplicación de muestra se conocía anteriormente como <strong>BasicCastSampleApp</strong></aside>

<h4 id="Specifying_your_own_Cast_Receiver_App_Id">Especificación de su propio ID de aplicación de receptor de transmisión</h4>
<p>La <strong>BasicCastGoogleReceiverSampleApp</strong> establece un ID de aplicación del receptor de demostración de Google, que puede ser útil para comenzar y realizar pruebas, pero no para la producción.</p>
<p>Para anular este valor con su aplicación Cast Receiver, defina el siguiente valor de cadena en la aplicación de muestra <strong>strings.xml</strong> expediente:</p>
<pre>
<code class="language-java" translate="No">&lt;string name=&quot;cast_receiver_app_id&quot;&gt;4F8B3483&lt;/string&gt;</code></pre>
</section>

<section class="bcls-section">
<h2 id="The_Brightcove_GoogleCastComponent">El componente GoogleCast de Brightcove</h2>

<p>La <code translate="No">GoogleCastComponent</code> class es la clase principal del complemento Brightcove Cast. Crea una instancia de ExoPlayer CastPlayer y establece sus oyentes. Expone algunos métodos esenciales para cargar un video o agregarlo a la cola. La <code translate="No">GoogleCastComponent</code> class también agrega varios detectores de eventos de Brightcove para manejar eventos de ciclo de vida de actividad y fragmentos, así como otros detectores de eventos que puede usar para emitir información multimedia para cargar un video en su dispositivo Chromecast.</p>

<p>La <code translate="No">GoogleCastComponent</code> ahora usa un patrón Builder. En las versiones del SDK nativo para Android anteriores a la v6.16.0, era necesario crear una instancia del componente y pasar el <code translate="No">Context</code> y <code translate="No">EventEmitter</code> hacia <code translate="No">GoogleCastComponent</code> constructor. Luego, establecería las opciones del componente en una serie de llamadas de método separadas.</p>
<p>A partir del SDK nativo para Android v6.16.0, use el patrón Builder para crear una instancia del <code translate="No">GoogleCastComponent</code> y establezca sus opciones, todo dentro de una única cadena de llamadas al método Builder.</p>
</section>

<section class="bcls-section">
<h2 id="CustomData">CustomData</h2>
<p>Como con el <code translate="No">GoogleCastComponent</code> , la <code translate="No">CustomData</code> La clase usa un patrón Builder para instanciar el objeto y agregarle propiedades. Si bien el receptor Brightcove puede utilizar <code translate="No">CustomData</code> para recuperar videos de su catálogo de Brightcove, no es necesario enviar un <code translate="No">CustomData</code> objeto, como para enviar un recurso remoto. También es importante tener en cuenta que cuando se utiliza el receptor de demostración de Google, el uso de <code translate="No">CustomData</code> no es apoyado. Para los propósitos de esta discusión, nos centraremos en <code translate="No">CustomData</code> enviado al receptor utilizado para recuperar los datos de vídeo del catálogo de Brightcove.</p>

<h3>¿Qué es CustomData?</h3>
<p><code translate="No">CustomData</code> es un objeto JSON contenido en el <code translate="No">MediaInfo</code> objeto. Su uso previsto es con la aplicación Brightcove Cast Receiver v2.0.</p>

<h3>CustomData con Brightcove Receiver y Catalog Data</h3>
<p>Al integrarse con Brightcove Receiver, el <code translate="No">CustomData</code> El objeto JSON tomará esta forma:</p>
<pre>
<code class="language-java" translate="No">&quot;customData&quot;: {
	&quot;accountId&quot;: &quot;1234567890&quot;,
	&quot;analyticsParams&quot;: {
		&quot;application&quot;: &quot;com.brightcove.player.test&quot;,
		&quot;user&quot;: &quot;abcde1c44b951234&quot;
	},
	&quot;catalogParams&quot;: {
		&quot;adConfigId&quot;: null,
		&quot;type&quot;: &quot;video&quot;,
		&quot;bcovAuthToken&quot;: null,
		&quot;id&quot;: &quot;2345678901&quot;,
		&quot;policyKey&quot;: &quot;BCpkPolicyKeyObject&quot;
	}
}
</code></pre>

<p>La <code translate="No">CustomData</code> El ejemplo de objeto anterior contiene todos los elementos de datos necesarios para transmitir un video desde Brightcove Receiver. Estos datos son los mismos independientemente del cifrado, es decir, no hay una estructura adicional necesaria para la URL de la licencia en el caso de los videos DRM.</p>
<p>También puede encontrar un ejemplo de <code translate="No">CustomData</code> objeto en el <strong>BrightcoveCastBrightcoveReceiverSampleApp</strong>.</p>

<h3>CustomData con el receptor de demostración de Google</h3>
<p>Como se indicó anteriormente, <code translate="No">CustomData</code> no es compatible con el receptor de demostración de Google.</p>

</section>

<section class="bcls-section">
<h2 id="BrightcoveCastMediaManager">BrightcoveCastMediaManager</h2>

<p>Es posible ampliar el <code translate="No">BrightcoveCastMediaManager</code> , como se muestra arriba, para anular sus métodos o implementar los suyos propios. Para ver ejemplos de cómo extender la clase BrightcoveCastMediaManager, consulte lo siguiente:</p>
<ul>
  <li>Amplíe la sección BrightcoveCastMediaManager</li>
  <li>BasicCastCustomRemoteVideoSampleApp</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="OptionsProvider">OpcionesProveedor</h2>

<p>A continuación, debe especificar el <a href="https://developers.google.com/android/reference/com/google/android/gms/cast/framework/OptionsProvider">OpcionesProveedor</a> implementación para el marco de Google Cast. La <code translate="No">OptionsProvider</code> La interfaz ayuda a configurar varias opciones necesarias para inicializar el <a href="https://developers.google.com/android/reference/com/google/android/gms/cast/framework/CastContext">CastContext</a> clase. Aquí es donde configurará el ID de la aplicación del receptor de transmisión. Para obtener más información sobre la integración de <code translate="No">OptionsProvider</code> , ver Google's <a href="https://developers.google.com/cast/docs/android_sender_integrate#initialize_the_cast_context">Inicializar el contexto de transmisión</a> documento.</p>
<p>El complemento Brightcove Cast incluye un <code translate="No">DefaultOptionsProvider</code> clase, donde el ID de la aplicación del receptor de transmisión se establece a través de una clave de cadena establecida en el <strong>strings.xml</strong> archivo de recursos. Para obtener más detalles y aprender cómo anularlo en su aplicación, consulte la <a href="#Using_your_own_Cast_Receiver_App_Id">Uso de su propia ID de aplicación del receptor Cast</a> sección anterior.</p>
<p>Ya sea que use el <code translate="No">DefaultOptionsProvider</code> clase o la tuya <code translate="No">OptionsProvider</code> implementación, necesita establecer el <code translate="No">OptionsProvider</code> nombre de la clase de implementación en la aplicación <strong>AndroidManifest.xml</strong> archivo como metadatos de par clave-valor, como se muestra aquí:</p>
<pre>
<code class="language-java" translate="No">&lt;meta-data android:name=&quot;com.google.android.gms.cast.framework.OPTIONS_PROVIDER_CLASS_NAME&quot; android:value=&quot;com.brightcove.cast.DefaultOptionsProvider&quot; /&gt;</code></pre>
<p>Si usa el <code translate="No">DefaultOptionsProvider</code> clase, puede configurar el <code translate="No">ExpandedControllerActivity</code> para activar / desactivar la notificación de transmisión mediante la configuración de información de metadatos similar en su <strong>AndroidManifest</strong>.</p>
</section>

<section class="bcls-section">
<h2 id="Expanded_Controller_Activity">Actividad del controlador ampliada</h2>

<p>La <a href="https://developers.google.com/android/reference/com/google/android/gms/cast/framework/media/widget/ExpandedControllerActivity">ExpandedControllerActivity</a> viene con la biblioteca de Google Cast y le permite controlar el video que se transmite en su dispositivo Chromecast. Esta clase proporciona cierta flexibilidad de personalización. Por ejemplo, hay cinco espacios disponibles para mostrar botones, donde el tercer espacio está reservado para el botón Reproducir no configurable. El resto de los botones se pueden configurar como otros botones predefinidos o como sus propios botones personalizados.</p>

<p>El complemento Brightcove Cast proporciona la subclase <code translate="No">DefaultExpandedControllerActivity</code>. Hemos habilitado los siguientes botones en el siguiente orden:</p>

<ul>
	<li><strong>Subtítulos</strong></li>
	<li><strong>Saltar anterior</strong></li>
	<li><strong>Tocar</strong></li>
	<li><strong>Omitir próximo</strong></li>
	<li><strong>Alternar silencio</strong></li>
</ul>

<p>Además, la barra de búsqueda establece el mismo elemento de diseño predeterminado que se utiliza en el estándar. <code translate="No">BrightcoveMediaController</code>:</p>

<ul>
	<li>El Progreso Dibujable:
	<pre>
<code class="language-java" translate="No">R.drawable.default_scrubber_progress_horizontal</code></pre>
	</li>
	<li>El pulgar dibujable:
	<pre>
<code class="language-java" translate="No">R.drawable.default_scrubber_thumb</code></pre>
	</li>
</ul>

<p>Para saber cómo personalizar la barra de búsqueda, consulte la <a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-player-controls/SeekBarColorsSampleApp/src/main">SeekBarColorsSampleApp</a>.</p>

<p>Para configurar el <code translate="No">DefaultExpandedControllerActivity</code> o el tuyo <code translate="No">ExpandedControllerActivity</code> , configure los siguientes metadatos en su <strong>AndroidManifest.xml</strong> expediente:</p>
<pre class="line-numbers">
<code class="language-java" translate="No">&lt;meta-data  android:name="com.brightcove.cast.DefaultOptionsProvider.EXPANDED_CONTROLLER_ACTIVITY_CLASS_NAME"
android:value="com.brightcove.cast.DefaultExpandedControllerActivity" /&gt;</code></pre>
</section>

<section class="bcls-section">
<h2 id="Cast_Notification">Notificación de reparto</h2>

<p>Cuando la Notificación de transmisión está habilitada, la notificación aparecerá cuando transmita un video y ponga su aplicación en segundo plano; por ejemplo, después de presionar la tecla de inicio.</p>
&lt;pPara habilitar la notificación de transmisión, configure los siguientes metadatos en su <strong>AndroidManifest.xml</strong> y proporcione el nombre de la actividad que se iniciará cuando se haga clic en la notificación:</p>
<pre class="line-numbers">
<code class="language-java" translate="No">&lt;meta-data android:name="com.brightcove.cast.DefaultOptionsProvider.NOTIFICATION_TARGET_ACTIVITY_CLASS_NAME"
android:value="com.brightcove.cast.BrightcoveControllerActivity" /&gt;</code></pre>

<p>Si no proporciona com.brightcove.cast.DefaultOptionsProvider.NOTIFICATION_TARGET_ACTIVITY_CLASS_NAME o si el valor tiene un nombre de actividad no válido, la notificación de transmisión se desactivará.</p>

<aside class="bcls-aside bcls-aside--information">Mientras quita el <code translate="No">meta-data</code> etiqueta de la <strong>AndroidManifest.xml</strong> El archivo desactivará las notificaciones de la aplicación del remitente, aún será posible ver una notificación en el dispositivo remitente que indica que un dispositivo está transmitiendo en su red Wi-Fi. Esta no es una notificación de la aplicación del remitente, sino una notificación del dispositivo remitente, independientemente de la configuración de la aplicación.</aside>
</section>

<section class="bcls-section">
<h2 id="The_Cast_Button">El botón Cast</h2>

<p>El botón de transmisión le permite seleccionar un dispositivo Chromecast en la misma red que su dispositivo y le permite conectarse y crear una sesión. Para agregar el botón de transmisión a su aplicación, siga las instrucciones de Google <a href="https://developers.google.com/cast/docs/android_sender_integrate#add_a_cast_button">Integrar elenco: Agregar un botón para transmitir</a> documento.</p>
<p>El complemento Brightcove Cast proporciona un método de utilidad para configurar fácilmente el botón Cast. Esto es útil cuando solo desea agregar el botón Transmitir al menú Actividad / Fragmento. Consulte el siguiente código para obtener más detalles:</p>
	<pre class="line-numbers">
<code class="language-java" translate="No">//Activity
@Override
public boolean onCreateOptionsMenu(Menu menu) {
   super.onCreateOptionsMenu(menu);
   GoogleCastComponent.setUpMediaRouteButton(MainActivity.this, menu);
   return true;
}</code></pre>
</section>

<section class="bcls-section">
<h2 id="The_Mini_Controller">El mini controlador</h2>

<p>El Mini Controlador es un Fragmento que se adjunta a su Actividad, generalmente ubicado en la parte inferior del diseño. El mini controlador le permite reproducir y pausar el video e indica cuándo se está reproduciendo un video en su dispositivo Chromecast. Cuando se hace clic en el minicontrolador, se inicia el controlador expandido.</p>
<p>Para habilitar el minicontrolador, agregue el siguiente código al diseño de su actividad.</p>
	<pre class="line-numbers">
<code class="language-java" translate="No">&lt;fragment
   android:id="@+id/castMiniController"
   android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:layout_alignParentBottom="true"
   android:visibility="gone"
   class="com.google.android.gms.cast.framework.media.widget.MiniControllerFragment" /&gt;</code></pre>

<p>Para conocer las mejores prácticas con el minicontrolador, consulte la <a href="https://developers.google.com/cast/docs/design_checklist/sender#sender-mini-controller">Lista de verificación de diseño: Mini controlador del remitente</a> documento. Para obtener detalles sobre la implementación, consulte la <a href="https://developers.google.com/cast/docs/android_sender_integrate#add_mini_controller">Integrar elenco: Agregar mini controlador</a> documento.</p>
</section>

<section class="bcls-section">
<h2 id="Advanced_Topics">Temas avanzados</h2>

<h3 id="Listening_for_Cast_session">Escuchando la sesión de Cast</h3>

<p>Si desea que su aplicación reaccione cuando la conexión de Cast comience o finalice, puede agregar el <code translate="No">GoogleCastEventType.CAST_SESSION_STARTED</code> o <code translate="No">GoogleCastEventType.CAST_SESSION_ENDED</code> oyentes de eventos como se muestra aquí:</p>

<pre class="line-numbers">
<code class="language-java" translate="No">eventEmitter.on(GoogleCastEventType.CAST_SESSION_STARTED, new EventListener() {
   @Override
   public void processEvent(Event event) {
       // Session Started
   }
});
eventEmitter.on(GoogleCastEventType.CAST_SESSION_ENDED, new EventListener() {
   @Override
   public void processEvent(Event event) {
       // Session Ended
   }
});</code></pre>

<p>Alternativamente, puede llamar <code translate="No">GoogleCastComponent.isSessionAvailable()</code> para comprobar si hay una sesión disponible.</p>

<h3 id="Casting_a_Video">Transmisión de un video</h3>

<p>Para transmitir un video a Chromecast después de una conexión exitosa, puede usar EventEmitter y emitir la información de información multimedia o puede usar directamente el <code translate="No">GoogleCastComponent</code> métodos.</p>

<p>Si prefiere emitir la información multimedia, puede utilizar los siguientes eventos:</p>

<ul>
	<li><code translate="No">GoogleCastEventType.LOAD_MEDIA_INFO</code></li>
	<li><code translate="No">GoogleCastEventType.LOAD_MEDIA_QUEUE_ITEM</code></li>
	<li><code translate="No">GoogleCastEventType.ADD_MEDIA_INFO</code></li>
	<li><code translate="No">GoogleCastEventType.ADD_MEDIA_QUEUE_ITEM</code></li>
</ul>

<p>La siguiente tabla muestra las propiedades esperadas para cada evento:</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th rowspan="2">Nombre del evento</th>
			<th colspan="2">Propiedades</th>
		</tr>
		<tr>
			<th>Clave</th>
			<th>Tipo de clase de valor</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><code translate="No">LOAD_MEDIA_INFO</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_INFO</code><br />
			<code translate="No">GoogleCastComponent.CAST_MEDIA_PLAY_POSITION</code></td>
			<td><code translate="No">MediaInfo</code> Entero</td>
		</tr>
		<tr>
			<td><code translate="No">LOAD_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">MediaQueueItem</code></td>
		</tr>
		<tr>
			<td><code translate="No">ADD_MEDIA_INFO</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_INFO</code><br />
			<code translate="No">GoogleCastComponent.CAST_MEDIA_PLAY_POSITION</code></td>
			<td><code translate="No">MediaInfo</code> Entero</td>
		</tr>
		<tr>
			<td><code translate="No">ADD_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">MediaQueueItem</code></td>
		</tr>
	</tbody>
</table>
<br/>
<p>Alternativamente, puede utilizar lo siguiente <code translate="No">GoogleCastComponent</code> métodos:</p>

<ul>
	<li>
	<pre>
<code class="language-java" translate="No">public void loadMediaInfo(MediaInfo mediaInfo, long positionMs)</code></pre>
	</li>
	<li>
	<pre>
<code class="language-java" translate="No">public void loadMediaInfo(MediaInfo mediaInfo)</code></pre>
	</li>
	<li>
	<pre>
<code class="language-java" translate="No">public PendingResult&lt;RemoteMediaClient.MediaChannelResult&gt; loadItem(MediaQueueItem mediaQueue, int playheadPosition)</code></pre>
	</li>
	<li>
	<pre>
<code class="language-java" translate="No">public PendingResult&lt;RemoteMediaClient.MediaChannelResult&gt; addItems(MediaQueueItem... mediaQueue )</code></pre>
	</li>
</ul>

<h3 id="Changing_the_default_MediaInfo_data">Cambiar los datos de MediaInfo predeterminados</h3>

<p>De forma predeterminada, el complemento Cast recopila información sobre el objeto de fuente y video actual emitido por el <code translate="No">EventType.SET_SOURCE event</code>. Si desea cambiar o agregar información adicional, como agregar un objeto JSON personalizado a su <code translate="No">MediaInfo</code> que el receptor de la aplicación entienda, puede hacerlo sobrescribiendo el <code translate="No">loadMediaInfo()</code> y <code translate="No">addMediaInfo()</code> métodos de la <code translate="No">BrightcoveCastMediaManager</code>. Entonces tu <code translate="No">BrightcoveCastMediaManager</code> La subclase se pasa como un parámetro de constructor a la <code translate="No">GoogleCastComponent</code> clase.</p>

<p>Dentro de estos métodos, puede crear su <code translate="No">MediaInfo</code> objetos y emitir los eventos apropiados como se mostró anteriormente. Asegúrate de comprobar <code translate="No">com.brightcove.cast.util.CastMediaUtil</code> , ya que proporciona algunos métodos de utilidad para crear un <code translate="No">MediaInfo</code> de los objetos Video y Source.</p>

<h3 id="Configuring_the_Cast_MediaController">Configuración de Cast MediaController</h3>

<p>Para cambiar el diseño del controlador que aparece en Brightcove Video View cuando se inicia una sesión de Cast, siga estos pasos.</p>

<ol class="bcls-tasklist-restart">
	<li><a href="#Extend_the_BrightcoveCastMediaManager">Amplíe BrightcoveCastMediaManager</a></li>
	<li><a href="#Set_the_MediaControllerConfig">Establecer MediaControllerConfig</a></li>
	<li><a href="#Overwrite_the_control_bar_setup">Sobrescribir la configuración de la barra de control</a></li>
</ol>

<h4 id="Extend_the_BrightcoveCastMediaManager">Amplíe BrightcoveCastMediaManager</h4>

<p>Para cambiar el comportamiento predeterminado del <code translate="No">BrightcoveCastMediaManager</code> , cree una subclase y sobrescriba algunos métodos clave:</p>

<ul>
	<li>
	<pre>
<code class="language-java" translate="No">public void updateBrightcoveMediaController(boolean isRemote)</code></pre>

	<p>Este método es llamado por el <code translate="No">GoogleCastComponent</code> cuando cambia la sesión; es decir, cuando la sesión ha comenzado o ha finalizado. Cuando la sesión ha comenzado, el <code translate="No">isRemote</code> el parámetro será <code translate="No">true</code> y el <code translate="No">setupRemoteController</code> se llama al método. De lo contrario, el <code translate="No">isRemote</code> estarán <code translate="No">false</code> y el <code translate="No">resetToLocalController</code> se llama.</p>
	</li>
	<li>
	<pre>
<code class="language-java" translate="No">protected void setupRemoteController()</code></pre>

	<p>Este método emite el evento <code translate="No">EventType.SET_MEDIA_CONTROLLER_CONFIG</code> con el <code translate="No">MediaControllerConfig</code> objeto. Hablaremos mas de <code translate="No">MediaControllerConfig</code> más adelante en esta sección. Este método también escucha el <code translate="No">BrightcoveMediaController.CONTROL_BAR_CREATED</code> evento y reacciona llamando al <code translate="No">setupBrightcoveControlBar</code> método.</p>
	</li>
	<li>
	<pre>
<code class="language-java" translate="No">protected void resetToLocalController()</code></pre>

	<p>Este método es responsable de restablecer el <code translate="No">BrightcoveMediaController</code> al diseño del controlador original emitiendo el <code translate="No">EventType.RESTORE_DEFAULT_MEDIA_CONTROLLER</code>.</p>
	</li>
	<li>
	<pre>
<code class="language-java" translate="No">protected void setupBrightcoveControlBar(BrightcoveControlBar controlBar)</code></pre>

	<p>Una vez el <code translate="No">BrightcoveMediaController</code> ha sido recreado con el diseño proporcionado en el <code translate="No">MediaControllerConfig</code> , tendrás acceso a la <code translate="No">BrightcoveControlBar</code> vista. Desde aquí, puede acceder a las vistas de la interfaz de usuario, como los botones, donde puede agregar <code translate="No">OnClickListener</code>es para ellos.</p>
	</li>
</ul>

<h4 id="Set_the_MediaControllerConfig">Establecer MediaControllerConfig</h4>

<p>La <code translate="No">MediaControllerConfig</code> es una clase de configuración que puede utilizar para cambiar el diseño de control predeterminado del <code translate="No">BrightcoveMediaController</code> clase. En esta clase, puede establecer el diseño y la <code translate="No">OnTouchListener</code>. Una vez creado y configurado, puede emitir este objeto como se muestra a continuación:</p>

<pre class="line-numbers">
<code class="language-java" translate="No">Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();
properties.put(Event.MEDIA_CONTROLLER_CONFIG, myMediaControllerConfig);
eventEmitter.emit(EventType.SET_MEDIA_CONTROLLER_CONFIG,properties);</code></pre>

<p>El valor por defecto <code translate="No">MediaControllerConfig</code> objeto establece el <code translate="No">R.layout.cast_media_controller</code> como el diseño con un solo <strong>Tocar</strong> botón. Al hacer clic, se abrirá un cuadro de diálogo con dos opciones:</p>

<ul>
	<li><strong>Reproducir ahora</strong> - Cuando se selecciona, el <code translate="No">loadMediaInfo()</code> se llama al método y el video se cargará y reproducirá en Chromecast.</li>
	<li><strong>Añadir a la cola</strong> - Cuando se selecciona, el <code translate="No">addMediaInfo()</code> se llama al método y el video se agrega al final de la cola.</li>
</ul>

<aside class="bcls-aside bcls-aside--information">Si desea mantener la misma interfaz de usuario pero desea cargar información adicional en el video que se está transmitiendo, puede sobrescribir el <code translate="No">loadMediaInfo()</code> y <code translate="No">addMediaInfo()</code> métodos y personalice la información que agregue a la <code translate="No">MediaInfo</code> objeto.</aside>

<h4 id="Overwrite_the_control_bar_setup">Sobrescribir la configuración de la barra de control</h4>

<p>Cuando el diseño de su controlador de medios se establece emitiendo el <code translate="No">MediaControllerConfig</code> , la <code translate="No">BrightcoveControlBar</code> se creará la vista y <code translate="No">BrightcoveCastMediaManager.setupBrightcoveControlBar()</code> se llamará al método. Es aquí donde puede obtener los componentes de la interfaz de usuario por Id y agregar los oyentes adecuados.</p>

<pre class="line-numbers">
<code class="language-java" translate="No">@Override
protected void setupBrightcoveControlBar(BrightcoveControlBar controlBar) {
   Button playButton = controlBar.findViewById(R.id.cast_play);
   if (playButton != null) {
       playButton.setOnClickListener(new View.OnClickListener() {...});
   }
}</code></pre>

</section>

<!-- <section class="bcls-section">
<h2 id="Cast_plugin_dependencies">Cast plugin dependencies</h2>

<p>The Cast plugin depends on the ExoPlayer Cast Extension:</p>

<pre>
<code class="language-java" translate="No">compile 'com.google.android.exoplayer:extension-cast:2.7.0'</code></pre>

<p>The extension have several dependencies which are listed in the table below:</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>Name</th>
			<th>Full notation and current version</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><a href="https://developer.android.com/reference/android/support/v7/media/MediaRouter">Mediarouter v7</a></td>
			<td><code translate="No">com.android.support:mediarouter-v7:27.0.0</code></td>
		</tr>
		<tr>
			<td><a href="https://developer.android.com/topic/libraries/support-library/packages#v7">Appcompat v7</a></td>
			<td><code translate="No">com.android.support:appcompat-v7:27.0.0</code></td>
		</tr>
		<tr>
			<td><a href="https://developer.android.com/topic/libraries/support-library/packages#v4">Support v4</a></td>
			<td><code translate="No">com.android.support:support-v4:27.0.0</code></td>
		</tr>
		<tr>
			<td><a href="https://developers.google.com/android/reference/com/google/android/gms/cast/package-summary">Cast Framework</a></td>
			<td><code translate="No">com.google.android.gms:play-services-cast-framework:11.4.2</code></td>
		</tr>
		<tr>
			<td><a href="https://github.com/google/ExoPlayer/tree/release-v2/library/core">ExoPlayer Core</a></td>
			<td><code translate="No">com.google.android.exoplayer:exoplayer-core:2.7.0</code></td>
		</tr>
		<tr>
			<td><a href="https://github.com/google/ExoPlayer/tree/release-v2/library/ui">ExoPlayer UI</a></td>
			<td><code translate="No">com.google.android.exoplayer:exoplayer-ui:2.7.0</code></td>
		</tr>
	</tbody>
</table>
</section> -->

<!-- <section class="bcls-section">
<h2 id="Limitations">Limitations</h2>

<p>With the current Brightcove Native SDK for Android release, certain Video Cloud features have limited support, or are not supported when using the Cast plugin with the Google sample receiver app:</p>

<ul>
	<li>Captions
	<ul>
		<li>Only in-manifest captions with Dynamic Delivery DASH display as expected when using the Cast plugin with the Google sample receiver app.</li>
		<li>In-manifest captions with HLS and Sidecar captions in any video configuration are not currently supported when using the Cast plugin with the Google sample receiver app.</li>
	</ul>
	</li>
	<li>Widevine Modular DRM is not supported when using the Cast plugin with the Google sample receiver app.</li>
	<li>Multiple Audio Tracks are not supported when using the Cast plugin with the Google sample receiver app.</li>
	<li>Client-side and Server-side Advertising is not supported when using the Cast plugin with the Google sample receiver app.</li>
	<li>Live and Live DVR streams are not supported when using the Cast plugin with the Google sample receiver app.</li>
	<li>Casting Offline Videos is not currently supported. When you download a video, the Source url is changed to point to a local file. If you then try casting that Video, the plugin will pick the local source but the Chromecast device will not be able to request the video.</li>
</ul>

<h3 id="Handling_currently_unsupported_features">Handling currently unsupported features</h3>

<p>The Cast plugin is responsible for gathering MediaInfo data, such as video url, title, description, and poster image, and casting it to your connected Chromecast device. Note that successful playback of the Video and display of the metadata ultimately depends on the Application Receiver.</p>

<p>It is the developer's responsibility to evaluate the Application Receiver for what it supports, and its limitations. Therefore, the developer should implement UI elements that inform the user what can or can’t be cast. For example, if the Application Receiver does not support Videos with DRM or Ads, your Android app must handle these scenarios.</p>
</section> -->

<section class="bcls-section">
<h2 id="Known_Issues">Problemas conocidos</h2>

<h3>Android 9</h3>

<p>Cuando utilice Chromecast con Android 9 y superior, debe incluir un <code translate="No">FOREGROUND_SERVICE</code> permiso. Esto permite que la aplicación use notificaciones para controlar una sesión de transmisión cuando la aplicación está en segundo plano y se devuelve al primer plano.</p>

<p>La <code translate="No">uses-permission</code> la etiqueta debe agregarse a la aplicación <strong>AndroidManifest.xml</strong> archivo, de la siguiente manera:</p>

<pre>
<code class="language-java" translate="No">&lt;uses-permission android:name="android.permission.FOREGROUND_SERVICE"/&gt;</code></pre>

<!-- <h3>Volume control</h3>

<p>The volume control in the Cast dialog may not decrease all the way to zero on the sending device. When using the volume control in the Cast dialog, or the volume buttons on the sending device, the displayed volume level may jump back up slightly to show a non-zero value on the sender. However, the receiver will display a non-zero value. This is a behavior with the Google Cast dialog, and not within the Brightcove Android SDK.</p> -->

<h4>Servicios de Google Play</h4>

<p>Es posible que no se cree la conexión de transmisión si la versión de Google Play Services del remitente no está actualizada. Cuando los servicios de Google Play del remitente, en particular el marco de servicios de Cast, están desactualizados, es posible que no pueda crear una conexión de Cast. Esto se soluciona actualizando los servicios de Google Play del remitente a través de Google Play Store.</p>
</section>
</article>