---
title: 'El complemento Cast para el SDK nativo para Android'
description: En este tema, aprenderá cómo transmitir sus videos a un televisor conectado a Chromecast, utilizando el complemento Cast para Brightcove Player SDK para Android.
parent: Connected TV 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">Descripción general</h2>

<p>Con <a href="https://developers.google.com/cast/docs/developers">Google Cast</a> tecnología, puede iniciar y controlar el contenido de video transmitido desde sus dispositivos móviles a televisores de alta definición y sistemas de audio en el hogar. Desde su aplicación, podrá tocar el botón Transmitir para transmitir su contenido en una pantalla grande.</p>

<p>Para crear una aplicación Cast, necesita los siguientes componentes:</p>

<ul>
	<li>
	<p>A <strong>solicitud de remitente</strong> - Este reside en su dispositivo móvil y detecta los dispositivos receptores, establece una conexión segura y refleja su contenido. La aplicación del remitente es el reproductor local que se transmite al Chromecast. Después de enviar contenido a la aplicación del receptor, puede pensar en él como un control remoto para Chromecast.</p>

	<p>La aplicación de remitente la proporciona el complemento Cast para Brightcove Player SDK para Android. Lo aprenderá en este tema.</p>
	</li>
	<li>
	<p>A <strong>aplicación del receptor</strong> - Este es el código que se ejecuta en el dispositivo Chromecast. Se puede considerar como una aplicación HTML de una sola página con elementos CSS y JS.</p>

	<p>Para realizar la prueba, siga estos pasos:</p>

	<ol class="bcls-tasklist">
		<li>Empezar con <a href="https://github.com/googlecast/CastReceiver">Receptor de transmisión de muestra de Google</a></li>
		<li>Revisar <a href="https://developers.google.com/cast/v2/receiver_apps#default">Receptor multimedia predeterminado de Google</a> documentación</li>
	</ol>

	<p>Para la producción, debe crear su propia aplicación de receptor, porque Google no admite el uso de su aplicación de receptor de demostración en un entorno de producción. Para obtener más detalles, consulte el <a href="https://developers.google.com/cast/docs/receiver_apps">Aplicaciones del receptor de transmisión</a> documentación.</p>
	</li>
</ul>

<aside class="bcls-aside bcls-aside--information">El complemento Cast para Brightcove Player SDK para Android proporciona la funcionalidad de la aplicación de remitente, pero debe implementar su propia aplicación de receptor.</aside>
</section>

<section class="bcls-section">
<h2 id="Cast_plugin">Complemento de transmisión</h2>

<p>El complemento Cast está construido sobre el <a href="https://medium.com/google-exoplayer/new-cast-extension-and-demo-app-55816a50012">nueva extensión ExoPlayer Cast</a> y el marco de transmisión de servicios de Google Play. Después de agregar la dependencia del complemento de transmisión, gradle extraerá la dependencia de Play Services Cast Framework, la dependencia de ExoPlayer Cast Extension junto con otras dependencias necesarias. Para obtener más información sobre las dependencias utilizadas, consulte la <a href="">Dependencias de Cast Plugin</a> sección.</p>

<h3 id="Supported_SDK_version">Versión de SDK compatible</h3>

<p>Para el complemento Cast, debe usar Brightcove Native SDK para Android versión 6.3.0+.</p>
</section>

<section class="bcls-section">
<h2 id="Getting_started">Empezando</h2>

<p>Para comenzar a usar el complemento Cast, siga estos pasos:</p>

<ol class="bcls-tasklist-restart">
	<li>En tus <strong>build.gradle</strong> archivo, agregue la siguiente dependencia para incluir el complemento Cast:

	<pre>
<code class="language-swift" translate="No">implementation "com.brightcove.player:android-cast-plugin:6.3.0"</code></pre>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Options_Provider">Proveedor de opciones</h2>

<p>A continuación, debe especificar el <a href="https://developers.google.com/android/reference/com/google/android/gms/cast/framework/OptionsProvider">OpcionesProveedor</a> implementación para el marco de Google Cast. La <code translate="No">OptionsProvider</code> La interfaz ayuda a configurar varias opciones necesarias para inicializar el <a href="https://developers.google.com/android/reference/com/google/android/gms/cast/framework/CastContext">CastContext</a> clase. Aquí es donde configurará el ID de la aplicación del receptor de transmisión. Para obtener más información sobre la integración de <code translate="No">OptionsProvider</code> , consulte el documento de Google: <a href="https://developers.google.com/cast/docs/android_sender_integrate#initialize_the_cast_context">Inicializar el contexto de transmisión</a>.</p>

<p>El complemento Brightcove Cast incluye un <code translate="No">DefaultOptionsProvider</code> clase, donde un ID de aplicación de receptor de Google Demo Cast predeterminado se establece a través de una clave de cadena establecida en el <strong>strings.xml</strong> expediente. Para obtener más detalles y aprender a sobrescribirlo, consulte la <a href="">ID de la aplicación del receptor de transmisión</a> sección.</p>

<ol class="bcls-tasklist">
	<li>Ya sea que use el <code translate="No">DefaultOptionsProvider</code> clase o la tuya <code translate="No">OptionsProvider</code> implementación, necesita establecer el <code translate="No">OptionsProvider</code> nombre de la clase de implementación en la aplicación <strong>AndroidManifest.xml</strong> archivo como metadatos de par clave-valor, como se muestra aquí:

	<pre class="line-numbers">
<code class="language-swift" translate="No">&lt;meta-data
android:name="com.google.android.gms.cast.framework.OPTIONS_PROVIDER_CLASS_NAME"
android:value="com.brightcove.cast.DefaultOptionsProvider" /&gt;</code></pre>
	</li>
</ol>

<p>Si usa el <code translate="No">DefaultOptionsProvider</code> clase, podrá configurar el <code translate="No">ExpandedControllerActivity</code> y active / desactive la Notificación de transmisión mediante la configuración de información de metadatos similar en su AndroidManifest.</p>
</section>

<section class="bcls-section">
<h2 id="Expanded_Controller_Activity">Actividad del controlador ampliada</h2>

<p>La <a href="https://developers.google.com/android/reference/com/google/android/gms/cast/framework/media/widget/ExpandedControllerActivity">ExpandedControllerActivity</a> viene con la biblioteca de Google Cast y le permite controlar el video que se transmite en su dispositivo Chromecast. Esta clase proporciona cierta flexibilidad de personalización. Por ejemplo, hay cinco espacios disponibles para mostrar botones, donde el tercer espacio está reservado para el botón Reproducir no configurable. El resto de los botones se pueden configurar como otros botones predefinidos o como sus propios botones personalizados.</p>

<p>El complemento Brightcove Cast proporciona la subclase <code translate="No">DefaultExpandedControllerActivity</code>. Hemos habilitado los siguientes botones en el siguiente orden:</p>

<ul>
	<li><strong>Subtítulos</strong></li>
	<li><strong>Saltar anterior</strong></li>
	<li><strong>Tocar</strong></li>
	<li><strong>Omitir próximo</strong></li>
	<li><strong>Alternar silencio</strong></li>
</ul>

<p>Además, la barra de búsqueda establece el mismo elemento de diseño predeterminado que se utiliza en el estándar. <code translate="No">BrightcoveMediaController</code>:</p>

<ul>
	<li>El Progreso Dibujable:
	<pre>
<code class="language-swift" translate="No">R.drawable.default_scrubber_progress_horizontal</code></pre>
	</li>
	<li>El pulgar dibujable:
	<pre>
<code class="language-swift" translate="No">R.drawable.default_scrubber_thumb</code></pre>
	</li>
</ul>

<p>Para saber cómo personalizar la barra de búsqueda, consulte la <a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-player-controls/SeekBarColorsSampleApp/src/main">SeekBarColorsSampleApp</a>.</p>

<ol class="bcls-tasklist">
	<li>Para configurar el <code translate="No">DefaultExpandedControllerActivity</code> o el tuyo <code translate="No">ExpandedControllerActivity</code> , configure los siguientes metadatos en su <strong>AndroidManifest.xml</strong> expediente:

	<pre class="line-numbers">
<code class="language-swift" translate="No">&lt;meta-data  android:name="com.brightcove.cast.DefaultOptionsProvider.EXPANDED_CONTROLLER_ACTIVITY_CLASS_NAME"
android:value="com.brightcove.cast.DefaultExpandedControllerActivity" /&gt;</code></pre>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Cast_Notification">Notificación de reparto</h2>

<p>Cuando la Notificación de transmisión está habilitada, la notificación aparecerá cuando transmita un video y ponga su aplicación en segundo plano; por ejemplo, después de presionar la tecla de inicio.</p>

<ol class="bcls-tasklist">
	<li>Para habilitar la notificación de transmisión, configure los siguientes metadatos en su <strong>AndroidManifest.xml</strong> y proporcione el nombre de la actividad que se iniciará cuando se haga clic en la notificación:

	<pre class="line-numbers">
<code class="language-swift" translate="No">&lt;meta-data android:name="com.brightcove.cast.DefaultOptionsProvider.NOTIFICATION_TARGET_ACTIVITY_CLASS_NAME"
android:value="com.brightcove.cast.BrightcoveControllerActivity" /&gt;</code></pre>
	</li>
</ol>

<p>Si no proporciona com.brightcove.cast.DefaultOptionsProvider.NOTIFICATION_TARGET_ACTIVITY_CLASS_NAME o si el valor tiene un nombre de actividad no válido, la notificación de transmisión se desactivará.</p>

<aside class="bcls-aside bcls-aside--information">Mientras quita el <code translate="No">meta-data</code> etiqueta de la <strong>AndroidManifest.xml</strong> El archivo desactivará las notificaciones de la aplicación del remitente, aún será posible ver una notificación en el dispositivo remitente que indica que un dispositivo está transmitiendo en su red Wi-Fi. Esta no es una notificación de la aplicación del remitente, sino una notificación del dispositivo remitente, independientemente de la configuración de la aplicación.</aside>
</section>

<section class="bcls-section">
<h2 id="Cast_Receiver_App_Id">ID de la aplicación del receptor de transmisión</h2>

<p>A continuación, configure su ID de aplicación de receptor de Google Cast en su proyecto. La aplicación Cast Receiver es un reproductor web responsable de reproducir sus videos en el dispositivo Chromecast. Para obtener más información sobre las aplicaciones del receptor, visite <a href="https://developers.google.com/cast/docs/receiver_apps">Guía oficial de Google</a>. Su aplicación Receiver tendrá una identificación hexadecimal única. Esta es la ID que establecerá en su aplicación de Android.</p>

<ol class="bcls-tasklist">
	<li>De forma predeterminada, Brightcove Cast Plugin establece un ID de aplicación del receptor de demostración de Google, que es útil para comenzar y probar, pero no para la producción. Para sobrescribir este valor con su aplicación Cast Receiver, defina el siguiente valor de cadena en su <strong>strings.xml</strong> expediente:

	<pre>
<code class="language-swift" translate="No">&lt;string name="cast_receiver_app_id"&gt;4F8B3483&lt;/string&gt;</code></pre>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="The_Cast_Button">El botón Cast</h2>

<p>El botón de transmisión le permite seleccionar un dispositivo Chromecast en la misma red que su dispositivo y le permite conectarse y crear una sesión. Para agregar el botón de transmisión a su aplicación, siga el documento de Google <a href="https://developers.google.com/cast/docs/android_sender_integrate#add_a_cast_button">Integrar elenco: Agregar un botón para transmitir</a>.</p>

<ol class="bcls-tasklist">
	<li>El complemento Brightcove Cast proporciona un método de utilidad para configurar fácilmente el botón Cast. Esto es útil cuando solo desea agregar el botón Transmitir al menú Actividad / Fragmento. Consulte el siguiente código para obtener más detalles:
	<pre class="line-numbers">
<code class="language-swift" translate="No">//Activity
@Override
public boolean onCreateOptionsMenu(Menu menu) {
   super.onCreateOptionsMenu(menu);
   GoogleCastComponent.setUpMediaRouteButton(MainActivity.this, menu);
   return true;
}</code></pre>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="The_Mini_Controller">El mini controlador</h2>

<p>El Mini Controlador es un Fragmento que se adjunta a su Actividad, generalmente ubicado en la parte inferior del diseño. El mini controlador le permite reproducir y pausar el video e indica cuándo se está reproduciendo un video en su dispositivo Chromecast. Cuando se hace clic en el minicontrolador, se inicia el controlador expandido.</p>

<ol class="bcls-tasklist">
	<li>Para habilitar el minicontrolador, agregue el siguiente código al diseño de su actividad.
	<pre class="line-numbers">
<code class="language-swift" translate="No">&lt;fragment
   android:id="@+id/castMiniController"
   android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:layout_alignParentBottom="true"
   android:visibility="gone"
   class="com.google.android.gms.cast.framework.media.widget.MiniControllerFragment" /&gt;</code></pre>
	</li>
</ol>

<p>Para conocer las mejores prácticas con el minicontrolador, consulte la <a href="https://developers.google.com/cast/docs/design_checklist/sender#sender-mini-controller">Lista de verificación de diseño: Mini controlador del remitente</a> documento. Para obtener detalles sobre la implementación, consulte la <a href="https://developers.google.com/cast/docs/android_sender_integrate#add_mini_controller">Integrar elenco: Agregar mini controlador</a> documento.</p>
</section>

<section class="bcls-section">
<h2 id="The_Brightcove_GoogleCastComponent">El componente GoogleCast de Brightcove</h2>

<p>La <code translate="No">GoogleCastComponent</code>La clase GoogleCastComponent es la clase principal del complemento Brightcove Cast. Crea una instancia de ExoPlayer CastPlayer y establece sus oyentes. Expone algunos métodos esenciales para cargar un video o agregarlo a la cola. La <code translate="No">GoogleCastComponent</code> class también agrega varios detectores de eventos de Brightcove para manejar eventos de ciclo de vida de actividad y fragmentos, así como otros detectores de eventos que puede usar para emitir información multimedia para cargar un video en su dispositivo Chromecast.</p>

<p>El complemento Cast fue diseñado para requerir un esfuerzo mínimo con Video Cloud. Al utilizar Video Cloud, el <code translate="No">BrightcoveCastMediaManager</code> La clase recopila información de la respuesta de Video Cloud, como los objetos Brightcove Video y Source, cada vez que <code translate="No">EventType.SET_SOURCE</code> se emite el evento. Esta información se almacena en caché y está lista para usar cuando el usuario selecciona reproducir para poner el video en cola.</p>

<ol class="bcls-tasklist">
	<li>Para crear el <code translate="No">GoogleCastComponent</code> clase, necesitas pasar la <code translate="No">Context</code> y <code translate="No">EventEmitter</code>:

	<pre>
<code class="language-swift" translate="No">GoogleCastComponent googleCastComponent = new GoogleCastComponent(eventEmitter, context);</code></pre>

	<p>O puede subclase <code translate="No">BrightcoveCastMediaManager</code> para sobrescribir parte de su comportamiento y pasarlo a la <code translate="No">GoogleCastComponent</code>:</p>

	<pre class="line-numbers">
<code class="language-swift" translate="No">MyBrightcoveCastMediaManager myBrightcoveCastMediaManager = new MyBrightcoveCastMediaManager(context, eventEmitter);

GoogleCastComponent googleCastComponent = new GoogleCastComponent(eventEmitter, context, myBrightcoveCastMediaManager);</code></pre>
	</li>
</ol>

<p>Esto es todo lo que necesita para comenzar a transmitir videos a su dispositivo Chromecast.</p>
</section>

<section class="bcls-section">
<h2 id="Listening_for_Cast_session">Escuchando la sesión de Cast</h2>

<p>Si desea que su aplicación reaccione cuando la conexión de Cast comience o finalice, puede agregar el <code translate="No">GoogleCastEventType.CAST_SESSION_STARTED</code> o <code translate="No">GoogleCastEventType.CAST_SESSION_ENDED</code> oyentes de eventos como se muestra aquí:</p>

<pre class="line-numbers">
<code class="language-swift" translate="No">eventEmitter.on(GoogleCastEventType.CAST_SESSION_STARTED, new EventListener() {
   @Override
   public void processEvent(Event event) {
       // Session Started
   }
});
eventEmitter.on(GoogleCastEventType.CAST_SESSION_ENDED, new EventListener() {
   @Override
   public void processEvent(Event event) {
       // Session Ended
   }
});</code></pre>

<p>Alternativamente, puede llamar <code translate="No">GoogleCastComponent.isSessionAvailable()</code> para comprobar si hay una sesión disponible.</p>
</section>

<section class="bcls-section">
<h2 id="Casting_a_Video">Transmisión de un video</h2>

<p>Para transmitir un video a Chromecast después de una conexión exitosa, puede usar EventEmitter y emitir la información de información multimedia o puede usar directamente el <code translate="No">GoogleCastComponent</code> métodos.</p>

<p>Si prefiere emitir la información multimedia, puede utilizar los siguientes eventos:</p>

<ul>
	<li><code translate="No">GoogleCastEventType.LOAD_MEDIA_INFO</code></li>
	<li><code translate="No">GoogleCastEventType.LOAD_MEDIA_QUEUE_ITEM</code></li>
	<li><code translate="No">GoogleCastEventType.ADD_MEDIA_INFO</code></li>
	<li><code translate="No">GoogleCastEventType.ADD_MEDIA_QUEUE_ITEM</code></li>
</ul>

<p>La siguiente tabla muestra las propiedades esperadas para cada evento:</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th rowspan="2">Nombre del evento</th>
			<th colspan="2">Propiedades</th>
		</tr>
		<tr>
			<th>Clave</th>
			<th>Tipo de clase de valor</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><code translate="No">LOAD_MEDIA_INFO</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_INFO</code><br />
			<code translate="No">GoogleCastComponent.CAST_MEDIA_PLAY_POSITION</code></td>
			<td><code translate="No">MediaInfo</code> Entero</td>
		</tr>
		<tr>
			<td><code translate="No">LOAD_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">MediaQueueItem</code></td>
		</tr>
		<tr>
			<td><code translate="No">ADD_MEDIA_INFO</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_INFO</code><br />
			<code translate="No">GoogleCastComponent.CAST_MEDIA_PLAY_POSITION</code></td>
			<td><code translate="No">MediaInfo</code> Entero</td>
		</tr>
		<tr>
			<td><code translate="No">ADD_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">MediaQueueItem</code></td>
		</tr>
	</tbody>
</table>

<p>Alternativamente, puede utilizar los siguientes métodos de GoogleCastComponent:</p>

<ul>
	<li>
	<pre>
<code class="language-swift" translate="No">public void loadMediaInfo(MediaInfo mediaInfo, long positionMs)</code></pre>
	</li>
	<li>
	<pre>
<code class="language-swift" translate="No">public void loadMediaInfo(MediaInfo mediaInfo)</code></pre>
	</li>
	<li>
	<pre>
<code class="language-swift" translate="No">public PendingResult&lt;RemoteMediaClient.MediaChannelResult&gt; loadItem(MediaQueueItem mediaQueue, int playheadPosition)</code></pre>
	</li>
	<li>
	<pre>
<code class="language-swift" translate="No">public PendingResult&lt;RemoteMediaClient.MediaChannelResult&gt; addItems(MediaQueueItem... mediaQueue )</code></pre>
	</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Changing_the_default_MediaInfo_data">Cambiar los datos de MediaInfo predeterminados</h2>

<p>De forma predeterminada, el complemento Cast recopila información sobre el objeto de fuente y video actual emitido por el <code translate="No">EventType.SET_SOURCE event</code>. Si desea cambiar o agregar información adicional, como agregar un objeto JSON personalizado a su <code translate="No">MediaInfo</code> que el receptor de la aplicación entienda, puede hacerlo sobrescribiendo el <code translate="No">loadMediaInfo()</code> y <code translate="No">addMediaInfo()</code> métodos de la <code translate="No">BrightcoveCastMediaManager</code>. Entonces tu <code translate="No">BrightcoveCastMediaManager</code> La subclase se pasa como un parámetro de constructor a la <code translate="No">GoogleCastComponent</code> clase.</p>

<p>Dentro de estos métodos, puede crear su <code translate="No">MediaInfo</code> objetos y emitir los eventos apropiados como se mostró anteriormente. Asegúrate de comprobar <code translate="No">com.brightcove.cast.util.CastMediaUtil</code> , ya que proporciona algunos métodos de utilidad para crear un <code translate="No">MediaInfo</code> de los objetos Video y Source.</p>
</section>

<section class="bcls-section">
<h2 id="Configuring_the_Cast_MediaController">Configuración de Cast MediaController</h2>

<p>Para cambiar el diseño del controlador que aparece en Brightcove Video View cuando se inicia una sesión de Cast, siga estos pasos.</p>

<ol class="bcls-tasklist-restart">
	<li><a href="#Extend_the_BrightcoveCastMediaManager">Amplíe BrightcoveCastMediaManager</a></li>
	<li><a href="#Set_the_MediaControllerConfig">Establecer MediaControllerConfig</a></li>
	<li><a href="#Overwrite_the_control_bar_setup">Sobrescribir la configuración de la barra de control</a></li>
</ol>

<h3 id="Extend_the_BrightcoveCastMediaManager">Amplíe BrightcoveCastMediaManager</h3>

<p>Para cambiar el comportamiento predeterminado del <code translate="No">BrightcoveCastMediaManager</code> , cree una subclase y sobrescriba algunos métodos clave:</p>

<ul>
	<li>
	<pre>
<code class="language-swift" translate="No">public void updateBrightcoveMediaController(boolean isRemote)</code></pre>

	<p>Este método es llamado por el <code translate="No">GoogleCastComponent</code> cuando cambia la sesión; es decir, cuando la sesión ha comenzado o ha finalizado. Cuando la sesión ha comenzado, el <code translate="No">isRemote</code> el parámetro será <code translate="No">true</code> y el <code translate="No">setupRemoteController</code> se llama al método. De lo contrario, el <code translate="No">isRemote</code> estarán <code translate="No">false</code> y el <code translate="No">resetToLocalController</code> se llama.</p>
	</li>
	<li>
	<pre>
<code class="language-swift" translate="No">protected void setupRemoteController()</code></pre>

	<p>Este método emite el evento <code translate="No">EventType.SET_MEDIA_CONTROLLER_CONFIG</code> con el <code translate="No">MediaControllerConfig</code> objeto. Hablaremos mas de <code translate="No">MediaControllerConfig</code> más adelante en esta sección. Este método también escucha el <code translate="No">BrightcoveMediaController.CONTROL_BAR_CREATED</code> evento y reacciona llamando al <code translate="No">setupBrightcoveControlBar</code> método.</p>
	</li>
	<li>
	<pre>
<code class="language-swift" translate="No">protected void resetToLocalController()</code></pre>

	<p>Este método es responsable de restablecer el <code translate="No">BrightcoveMediaController</code> al diseño del controlador original emitiendo el <code translate="No">EventType.RESTORE_DEFAULT_MEDIA_CONTROLLER</code>.</p>
	</li>
	<li>
	<pre>
<code class="language-swift" translate="No">protected void setupBrightcoveControlBar(BrightcoveControlBar controlBar)</code></pre>

	<p>Una vez el <code translate="No">BrightcoveMediaController</code> ha sido recreado con el diseño proporcionado en el <code translate="No">MediaControllerConfig</code> , tendrás acceso a la <code translate="No">BrightcoveControlBar</code> vista. Desde aquí, puede acceder a las vistas de la interfaz de usuario, como los botones, donde puede agregar <code translate="No">OnClickListener</code>es para ellos.</p>
	</li>
</ul>

<h3 id="Set_the_MediaControllerConfig">Establecer MediaControllerConfig</h3>

<p>La <code translate="No">MediaControllerConfig</code> es una clase de configuración que puede utilizar para cambiar el diseño de control predeterminado del <code translate="No">BrightcoveMediaController</code> clase. En esta clase, puede establecer el diseño y la <code translate="No">OnTouchListener</code>. Una vez creado y configurado, puede emitir este objeto como se muestra a continuación:</p>

<pre class="line-numbers">
<code class="language-swift" translate="No">Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();
properties.put(Event.MEDIA_CONTROLLER_CONFIG, myMediaControllerConfig);
eventEmitter.emit(EventType.SET_MEDIA_CONTROLLER_CONFIG,properties);</code></pre>

<p>El valor por defecto <code translate="No">MediaControllerConfig</code> objeto establece el <code translate="No">R.layout.cast_media_controller</code> como el diseño con un solo <strong>Tocar</strong> botón. Al hacer clic, se abrirá un cuadro de diálogo con dos opciones:</p>

<ul>
	<li><strong>Reproducir ahora</strong> - Cuando se selecciona, el <code translate="No">loadMediaInfo()</code> se llama al método y el video se cargará y reproducirá en Chromecast.</li>
	<li><strong>Añadir a la cola</strong> - Cuando se selecciona, el <code translate="No">addMediaInfo()</code> se llama al método y el video se agrega al final de la cola.</li>
</ul>

<aside class="bcls-aside bcls-aside--information">Si desea mantener la misma interfaz de usuario pero desea cargar información adicional en el video que se está transmitiendo, puede sobrescribir el <code translate="No">loadMediaInfo()</code> y <code translate="No">addMediaInfo()</code> métodos y personalice la información que agregue a la <code translate="No">MediaInfo</code> objeto.</aside>

<h3 id="Overwrite_the_control_bar_setup">Sobrescribir la configuración de la barra de control</h3>

<p>Cuando el diseño de su controlador de medios se establece emitiendo el <code translate="No">MediaControllerConfig</code> , la <code translate="No">BrightcoveControlBar</code> se creará la vista y <code translate="No">BrightcoveCastMediaManager.setupBrightcoveControlBar()</code> se llamará al método. Es aquí donde puede obtener los componentes de la interfaz de usuario por Id y agregar los oyentes adecuados.</p>

<pre class="line-numbers">
<code class="language-swift" translate="No">@Override
protected void setupBrightcoveControlBar(BrightcoveControlBar controlBar) {
   Button playButton = controlBar.findViewById(R.id.cast_play);
   if (playButton != null) {
       playButton.setOnClickListener(new View.OnClickListener() {...});
   }
}</code></pre>
</section>

<section class="bcls-section">
<h2 id="Cast_plugin_dependencies">Dependencias de complementos de transmisión</h2>

<p>El complemento Cast depende de ExoPlayer Cast Extension:</p>

<pre>
<code class="language-swift" translate="No">compile 'com.google.android.exoplayer:extension-cast:2.7.0'</code></pre>

<p>La extensión tiene varias dependencias que se enumeran en la siguiente tabla:</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>Nombre</th>
			<th>Notación completa y versión actual</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><a href="https://developer.android.com/reference/android/support/v7/media/MediaRouter">Router medio v7</a></td>
			<td><code translate="No">com.android.support:mediarouter-v7:27.0.0</code></td>
		</tr>
		<tr>
			<td><a href="https://developer.android.com/topic/libraries/support-library/packages#v7">Appcompat v7</a></td>
			<td><code translate="No">com.android.support:appcompat-v7:27.0.0</code></td>
		</tr>
		<tr>
			<td><a href="https://developer.android.com/topic/libraries/support-library/packages#v4">Soporte v4</a></td>
			<td><code translate="No">com.android.support:support-v4:27.0.0</code></td>
		</tr>
		<tr>
			<td><a href="https://developers.google.com/android/reference/com/google/android/gms/cast/package-summary">Marco de fundición</a></td>
			<td><code translate="No">com.google.android.gms:play-services-cast-framework:11.4.2</code></td>
		</tr>
		<tr>
			<td><a href="https://github.com/google/ExoPlayer/tree/release-v2/library/core">Núcleo de ExoPlayer</a></td>
			<td><code translate="No">com.google.android.exoplayer:exoplayer-core:2.7.0</code></td>
		</tr>
		<tr>
			<td><a href="https://github.com/google/ExoPlayer/tree/release-v2/library/ui">Interfaz de usuario de ExoPlayer</a></td>
			<td><code translate="No">com.google.android.exoplayer:exoplayer-ui:2.7.0</code></td>
		</tr>
	</tbody>
</table>
</section>

<section class="bcls-section">
<h2 id="Limitations">Limitaciones</h2>

<p>Con la versión actual de Brightcove Native SDK para Android, ciertas funciones de Video Cloud tienen soporte limitado o no son compatibles cuando se usa el complemento Cast con la aplicación de receptor de muestra de Google:</p>

<ul>
	<li>Subtítulos
	<ul>
		<li>Solo los subtítulos en el manifiesto con Dynamic Delivery DASH se muestran como se esperaba cuando se usa el complemento Cast con la aplicación de receptor de muestra de Google.</li>
		<li>Los subtítulos en el manifiesto con subtítulos HLS y Sidecar en cualquier configuración de video no son compatibles actualmente cuando se usa el complemento Cast con la aplicación de receptor de muestra de Google.</li>
	</ul>
	</li>
	<li>Widevine Modular DRM no es compatible cuando se usa el complemento Cast con la aplicación de receptor de muestra de Google.</li>
	<li>No se admiten varias pistas de audio cuando se utiliza el complemento Cast con la aplicación de receptor de muestra de Google.</li>
	<li>La publicidad del lado del cliente y del lado del servidor no es compatible cuando se usa el complemento Cast con la aplicación de receptor de muestra de Google.</li>
	<li>Las transmisiones de DVR en vivo y en vivo no son compatibles cuando se usa el complemento Cast con la aplicación de receptor de muestra de Google.</li>
	<li>Actualmente, no se admite la transmisión de videos sin conexión. Cuando descarga un video, la URL de origen se cambia para apuntar a un archivo local. Si luego intentas transmitir ese video, el complemento elegirá la fuente local, pero el dispositivo Chromecast no podrá solicitar el video.</li>
</ul>

<h3 id="Handling_currently_unsupported_features">Manejo de funciones actualmente no admitidas</h3>

<p>El complemento Cast es responsable de recopilar datos de MediaInfo, como la URL del video, el título, la descripción y la imagen del póster, y transmitirlos a su dispositivo Chromecast conectado. Tenga en cuenta que la reproducción exitosa del video y la visualización de los metadatos depende en última instancia del receptor de la aplicación.</p>

<p>Es responsabilidad del desarrollador evaluar el Receptor de la aplicación por lo que admite y sus limitaciones. Por lo tanto, el desarrollador debe implementar elementos de la interfaz de usuario que informen al usuario qué se puede o no se puede transmitir. Por ejemplo, si Application Receiver no admite videos con DRM o anuncios, su aplicación de Android debe manejar estos escenarios.</p>
</section>

<section class="bcls-section">
<h2 id="Known_Issues">Problemas conocidos</h2>

<h3>Android 9</h3>

<p>Cuando utilice Chromecast con Android 9, deberá incluir un <code translate="No">FOREGROUND_SERVICE</code> permiso. Esto permite que la aplicación use notificaciones para controlar una sesión de transmisión cuando la aplicación está en segundo plano y se devuelve al primer plano.</p>

<p>La <code translate="No">uses-permission</code> la etiqueta debe agregarse a la aplicación <strong>AndroidManifest.xml</strong> archivo, de la siguiente manera:</p>

<pre>
<code class="language-java" translate="No">&lt;uses-permission android:name="android.permission.FOREGROUND_SERVICE"/&gt;</code></pre>

<h3>Control del volumen</h3>

<p>Es posible que el control de volumen en el cuadro de diálogo de transmisión no disminuya completamente a cero en el dispositivo de envío. Cuando se usa el control de volumen en el cuadro de diálogo Transmitir, o los botones de volumen en el dispositivo de envío, el nivel de volumen mostrado puede volver a subir ligeramente para mostrar un valor distinto de cero en el remitente. Sin embargo, el receptor mostrará un valor distinto de cero. Este es un comportamiento con el cuadro de diálogo de Google Cast y no dentro del SDK de Brightcove para Android.</p>

<h4>Servicios de Google Play</h4>

<p>Es posible que no se cree la conexión de transmisión si la versión de Google Play Services del remitente no está actualizada. Cuando los servicios de Google Play del remitente, en particular el marco de servicios de Cast, están desactualizados, es posible que no pueda crear una conexión de Cast. Esto se soluciona actualizando los servicios de Google Play del remitente a través de Google Play Store.</p>
</section>
</article>