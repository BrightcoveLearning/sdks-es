---
title: 'Varias pistas de audio para reproducción sin conexión con el SDK nativo para Android'
description: En este tema, aprenderá cómo devolver múltiples pistas de audio y texto cuando trabaje con la reproducción sin conexión con Brightcove Native Player SDK para Android.
parent: Playback 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Manage_multiple_tracks">Administrar múltiples pistas</h2>

<p>De forma predeterminada, no se descargan archivos de subtítulos y solo se descarga una pista de audio. Para descargar recursos adicionales asociados con el video, siga estos pasos:</p>

<ol class="bcls-tasklist">
	<li>
	<p>Obtenga una referencia a Video Cloud <a href="/android/reference/javadoc/com/brightcove/player/edge/OfflineCatalog.html">OfflineCatalog</a> cliente.</p>

	<pre>
<code class="language-java" translate="No">private OfflineCatalog catalog;
...
catalog = new OfflineCatalog(this, eventEmitter, ACCOUNT_ID, POLICY_KEY);
...</code></pre>
	</li>
	<li>
	<p>Llama a <a href="/android/reference/javadoc/com/brightcove/player/edge/AbstractOfflineCatalog.html#getMediaFormatTracksAvailable-com.brightcove.player.model.Video-com.brightcove.player.offline.MediaDownloadable.MediaFormatListener-">getMediaFormatTracksAvailable</a> método, pasando en el <a href="/android/reference/javadoc/com/brightcove/player/model/Video.html">Video</a> objeto sobre el que desea obtener información, y el <a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.MediaFormatListener.html">MediaFormatListener</a> para escuchar los datos devueltos.</p>

	<pre>
<code class="language-java" translate="No">OfflineCatalog.getMediaFormatTracksAvailable(
  @NonNull final Video video,
  @NonNull final MediaDownloadable.MediaFormatListener mediaFormatListener)</code></pre>
	</li>
	<li>
	<p>La <code translate="No">MediaFormatListener</code> llama al siguiente método:</p>

	<pre>
<code class="language-java" translate="No">void onResult(MediaDownloadable mediaDownloadable, Bundle mediaFormatBundle);</code></pre>

	<p>La <a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.html">Medios descargables</a> El objeto contiene información, incluidas las interpretaciones de video, los idiomas de audio y los subtítulos. La <code translate="No">mediaDownloadable</code> el objeto se almacena en caché y se usa cuando llamas <a href="/android/reference/javadoc/com/brightcove/player/edge/AbstractOfflineCatalog.html#downloadVideo-com.brightcove.player.model.Video-">OfflineCatalog.downloadVideo (Video)</a>.</p>

	<p>La <a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.MediaFormatListener.html">Manojo</a> El objeto contiene información sobre las pistas de formato de medios disponibles y tiene las siguientes propiedades:</p>

	<ul>
		<li><a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.html#VIDEO_RENDITIONS">MediaDownloadable.VIDEO_RENDITIONS</a> - Contiene una lista de matriz de <code translate="No">MediaFormat</code> objetos</li>
		<li><a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.html#AUDIO_LANGUAGES">MediaDownloadable.AUDIO_LANGUAGES</a> - Contiene una lista de matriz de <code translate="No">MediaFormat</code> objetos.</li>
		<li><a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.html#AUDIO_LANGUAGE_ROLES">MediaDownloadable.AUDIO_LANGUAGE_ROLES</a> - Contiene una lista de matriz de cadenas. Esta lista proporciona información adicional con respecto a la <code translate="No">MediaDownloadable.AUDIO_LANGUAGES</code>. Los índices coinciden con la lista de idiomas de audio. El ejemplo de roles de audio puede ser principal y alternativo.</li>
		<li><a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.html#CAPTIONS">MediaDownloadable.CAPTIONS</a> - Contiene una lista de matriz de <code translate="No">MediaFormat</code> objetos</li>
	</ul>
	</li>
	<li>
	<p>Recupere listas de datos del paquete. A continuación, se muestran ejemplos para recuperar las diferentes listas:</p>

	<pre>
<code class="language-java" translate="No">ArrayList&lt;MediaFormat&gt; video = bundle.getParcelableArrayList(MediaDownloadable.VIDEO_RENDITIONS);

ArrayList&lt;MediaFormat&gt; audio = bundle.getParcelableArrayList(MediaDownloadable.AUDIO_LANGUAGES);

ArrayList&lt;String&gt; roles = bundle.getStringArrayList(MediaDownloadable.AUDIO_LANGUAGE_ROLES);

ArrayList&lt;MediaFormat&gt; captions = bundle.getParcelableArrayList(MediaDownloadable.CAPTIONS);</code></pre>
	</li>
	<li>
	<p>Crear un nuevo <code translate="No">Bundle</code> (<code translate="No">filteredBundle</code> ) para seleccionar las pistas de audio y los subtítulos que desea incluir en la descarga.</p>

	<pre>
<code class="language-java" translate="No">Bundle filteredBundle = new Bundle();</code></pre>

	<aside class="bcls-aside bcls-aside--information">Si reutiliza el paquete creado anteriormente, puede descargar todas las pistas de audio y subtítulos.</aside>
	</li>
	<li>
	<p>Filtre las pistas que desee de la lista que creó anteriormente y agréguelas a la nueva <code translate="No">filteredBundle</code>.</p>

	<pre>
<code class="language-java" translate="No">ArrayList&lt;MediaFormat&gt; captions = bundle.getParcelableArrayList(MediaDownloadable.CAPTIONS);
if (captions != null &amp;&amp; captions.size() &gt; 0) {
   ArrayList&lt;MediaFormat&gt; newCaptions = new ArrayList&lt;&gt;();
   newCaptions.add(captions.get(0));

filteredBundle.putParcelableArrayList(MediaDownloadable.CAPTIONS, newCaptions);
}</code></pre>
	</li>
	<li>
	<p>Selecciona el <code translate="No">filteredBundle</code> hacia <code translate="No">MediaDownloadable</code> objeto.</p>

	<pre>
<code class="language-java" translate="No">mediaDownloadable.setConfigurationBundle(filteredBundle);</code></pre>
	</li>
	<li>
	<p>Descarga el video.</p>

	<pre>
<code class="language-java" translate="No">offlineCatalog.downloadVideo(video);</code></pre>

	<p>Internamente, el <code translate="No">OfflineCatalog</code> usará el caché <code translate="No">MediaDownloadable</code> proporcionado por el <code translate="No">MediaDownloadable.MediaFormatListener</code> llamar de vuelta.</p>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Code_sample">Muestra de código</h2>

<p>Para obtener un ejemplo completo de cómo descargar pistas de audio y archivos de subtítulos adicionales, consulte la <a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/OfflinePlaybackSampleApp/src/main/java/com/brightcove/player/samples/offlineplayback">Aplicación de muestra de reproducción sin conexión</a>.</p>
</section>
</article>