---
title: 'Androide: Selección de fuente'
description: En este tema, aprenderá cómo Brightcove Native Player SDK para Android utiliza un proceso de selección de fuente predeterminado al reproducir un video.
parent: Playback 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Introduction">Introducción</h2>

<p>Cuando recupera videos del catálogo de Brightcove, el SDK tiene que decidir qué fuente reproducir. Esto se implementa en el <a href="/android/reference/javadoc/com/brightcove/player/controller/DefaultSourceSelectionController.html">DefaultSourceSelectionController</a> y <a href="/android/reference/javadoc/com/brightcove/player/controller/ExoPlayerSourceSelectionController.html">ExoPlayerSourceSelectionController</a> componentes.</p>
</section>

<section class="bcls-section">
<h2 id="Default_selection_process">Proceso de selección predeterminado</h2>

<p>Brightcove Player SDK para Android utiliza un proceso de selección de fuente predeterminado. Para simplificar, nos centraremos en el soporte del SDK para Brightcove Playback API y ExoPlayer de Google.</p>

<p>El proceso de selección predeterminado se define de la siguiente manera:</p>

<ol class="bcls-tasklist">
	<li>
	<p>Con Brightcove Native SDK para Android 6.4+, la entrega HTTPS para todos los tipos de fuentes se selecciona si está disponible.</p>

	<p>Ambos <a href="/android/reference/javadoc/com/brightcove/player/controller/DefaultSourceSelectionController.html">DefaultSourceSelectionController</a> y <a href="/android/reference/javadoc/com/brightcove/player/controller/ExoPlayerSourceSelectionController.html">ExoPlayerSourceSelectionController</a> intente seleccionar la versión HTTPS del <code translate="No">deliveryType</code> seleccionado. Si no existe ninguna fuente HTTPS, el controlador de selección seleccionará la primera disponible.</p>

	<aside class="bcls-aside bcls-aside--information">Si su video tiene fuentes HTTP y HTTPS para títulos / subtítulos WebVTT, es posible que el SDK nativo para Android no devuelva la versión HTTPS. Brightcove es consciente de esta situación y tendrá una solución en una versión futura.</aside>
	</li>
	<li>La <a href="/android/reference/javadoc/com/brightcove/player/view/BrightcoveExoPlayerVideoView.html">BrightcoveExoPlayerVideoView</a> busca la primera fuente que tenga un <code translate="No">deliveryType</code> de <strong>MPEG-DASH</strong> , y un perfil que no es ni <strong>urna: hbbtv</strong> ni <strong>urna: dvb</strong>. El SDK no admite la reproducción con ninguno de estos perfiles DASH, por lo que se eliminarán de las fuentes.</li>
	<li>Si no se encuentra lo anterior, la selección de fuente vuelve a la primera fuente con un <code translate="No">deliveryType</code> de <strong>HLS</strong>.</li>
	<li>Si no se encuentra tal fuente, vuelve a la fuente con un <code translate="No">deliveryType</code> de <strong>MP4</strong> y una tasa de bits más cercana a 256 kBps.</li>
</ol>

<p>Una vez que se encuentra una fuente, la implementación continúa de la siguiente manera:</p>

<ol class="bcls-tasklist">
	<li>Si se encuentra, la fuente seleccionada se emitirá con una respuesta al <strong>SELECT_SOURCE</strong> evento.</li>
	<li>Por defecto, el <a href="/android/reference/javadoc/com/brightcove/player/controller/VideoPlaybackController.html">VideoPlaybackController</a> maneja el <strong>SELECT_SOURCE</strong> respuesta, emitiendo una <strong>SET_SOURCE</strong> evento.</li>
	<li>La <a href="/android/reference/javadoc/com/brightcove/player/display/VideoDisplayComponent.html">VideoDisplayComponent</a> o una subclase maneja el <strong>SET_SOURCE</strong> evento cargando la URL en el reproductor subyacente (ExoPlayer o MediaPlayer).</li>
	<li>Cuando comienza la reproducción, el reproductor subyacente es responsable de adaptar la tasa de bits con el contenido HLS y DASH. Con HLS, el reproductor subyacente comienza con la primera tasa de bits enumerada en el manifiesto maestro.</li>
</ol>

<p>Cuando se utiliza la configuración de transcodificación predeterminada, la primera fuente de HLS debe ser la lista de reproducción maestra m3u8 que apunta a todas sus fuentes individuales (representaciones).</p>
</section>

<section class="bcls-section">
<h2 id="Setting_HLS_sources">Configuración de fuentes HLS</h2>

<p>Es posible personalizar la selección de fuente a nivel de la aplicación, para filtrar cualquier tipo de entrega no deseado antes de que se invoque la política de selección de fuente predeterminada del SDK. Para hacer esto, debe modificar las colecciones de origen que se establecen en el objeto Video desde la respuesta JSON de la API de reproducción.</p>

<p>Este ejemplo usa solo fuentes HLS:</p>

<pre class="line-numbers">
<code class="language-java" translate="No">catalog.findVideoByReferenceID(videoReferenceId, new com.brightcove.player.edge.VideoListener() {
	@Override
	public void onVideo(Video video) {
	 sourceSelectionFilter(DeliveryType.HLS, video);
	 brightcoveVideoView.add(video);
	 brightcoveVideoView.start();
	}
});</code></pre>

<p>Y el <code translate="No">sourceSelectionFilter()</code> El método se vería así:</p>

<pre class="line-numbers">
<code class="language-java" translate="No">public static void sourceSelectionFilter(@NonNull DeliveryType deliveryTypeFilter, @NonNull Video video) {
 if (video.getSourceCollections().containsKey(deliveryTypeFilter)) {
   // Only remove the other delivery types if the desired type is in our Source collections
   for (DeliveryType deliveryType : DeliveryType.values()) {
     if (!deliveryType.equals(deliveryTypeFilter)) {
            video.getSourceCollections().remove(deliveryType);
     }
   }
 }
}</code></pre>
</section>
</article>