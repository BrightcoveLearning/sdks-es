---
title: Uso del complemento Pulse con la descripción del SDK nativo para Android
description: En este tema, aprenderá a utilizar el complemento Pulse con el SDK nativo de Brightcove para Android.
parent: Advertising 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>


<section class="bcls-section">
<h2 id="Introduction">Introducción</h2>
<p>El complemento Pulse de Brightcove le permite integrar el SDK Pulse de Invidi con el SDK nativo de Brightcove para Android. Pulse es una plataforma de publicidad en video. Para obtener información sobre las campañas y la configuración, consulte su <a href="https://docs.invidi.com/reader/_hzObZcxZxk0Ct6OlYIk9A/RAeqPLOCQZ5XttfyEPlg~w">Guía del usuario</a>.</p>
<aside class="bcls-aside bcls-aside--information"> Notas:
  <ul>
    <li>
      Compatible con Brightcove Native SDK para Android versión 6.12 y superior.
    </li>
    <li>
      Esta función ha sido probada con la versión 2.5.19.9.0 de Pulse SDK. Recomendamos usar esta versión.
    </li>
  </ul>
</aside>
</section>

<section class="bcls-section">
<h2 id="Steps">Pasos</h2>
<p>
  Una vez que se crea una campaña en la plataforma Pulse, puede comenzar a utilizar Pulse Plugin para Brightcove Native SDK para Android. Siga estos pasos para integrar Pulse Plugin con su proyecto:
</p>
<ol class="bcls-tasklist">
	<li>
    <p>
      En tu módulo <strong>build.gradle</strong> archivo, agregue la dependencia del complemento Pulse.
    </p>
    <pre class="line-numbers"><code class="language-java" translate="No">dependencies {
    implementation 'com.brightcove.player:android-pulse-plugin:6.12.0'
}</code></pre>
  </li>
  <li>
    <p>
      Descargar el <a href="https://docs.invidi.com/reader/_hzObZcxZxk0Ct6OlYIk9A/H1FP_BHOo3Tcm3H29a73ww">Archivo .aar de Pulse SDK</a>.
    </p>
  </li>
  <li>
    <p>
      En tus <strong>app / libs</strong> carpeta, abra la <strong>build.gradle</strong> archivo de su módulo. Modifique lo siguiente:
    </p>
    <pre class="line-numbers"><code class="language-java" translate="No">dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar', <span class="bcls-highlight">'*.aar'</span>])
}</code></pre>
  </li>
  <li>
    <p>
      En tus <strong>MainActivity.java</strong> archivo, inicialice el complemento Pulse creando una instancia <code translate="No">PulseComponent</code> con la URL de host Pulse creada para su campaña.
    </p>
    <pre class="line-numbers"><code class="language-java" translate="No">@Override
protected void onCreate(Bundle savedInstanceState) {
    // ...
    // Creating pulse component
    PulseComponent pulseComponent = new PulseComponent(
            &quot;<span class="bcls-input">your pulse host url</span>&quot;,
            brightcoveVideoView.getEventEmitter(),
            brightcoveVideoView);
    // ...
}</code></pre>
  </li>
  <li>
    <p>
      Selecciona el <code translate="No">PulseComponent</code> Oyente.
    </p>
    <pre class="line-numbers"><code class="language-java" translate="No">pulseComponent.setListener(new PulseComponent.Listener() {
  @NonNull
  @Override
  public PulseSession onCreatePulseSession(
    @NonNull String hostUrl,
    @NonNull Video video,
    @NonNull ContentMetadata contentMetadata,
    @NonNull RequestSettings requestSettings) {
    // See step 3a
    return Pulse.createSession(contentMetadata, requestSettings);
  }

  @Override
  public void onOpenClickthrough(@NonNull PulseVideoAd pulseVideoAd) {
  }
});</code></pre>
  </li>
  <li>
    <p>
      Implementar el <code translate="No">onCreatePulseSession</code> método, que crea un <code translate="No">PulseSession</code> y lo devuelve al <code translate="No">PulseComponent</code>. Hay tres parámetros:
    </p>
    <ul>
      <li>
        El anfitrión del pulso
      </li>
      <li>
        La configuración de metadatos de contenido
      </li>
      <li>
        La configuración de la solicitud
      </li>
    </ul>
    <br/>

    <pre class="line-numbers"><code class="language-java" translate="No">@NonNull
@Override
public PulseSession onCreatePulseSession(
    @NonNull String hostUrl,
    @NonNull Video video,
    @NonNull ContentMetadata contentMetadata,
    @NonNull RequestSettings requestSettings) {
  // Set the pulse Host:
  Pulse.setPulseHost(pulseHostUrl, null, null);

  // Content metadata settings
  contentMetadata.setCategory(&quot;skip-always&quot;);
  contentMetadata.setTags(Collections.singletonList(&quot;standard-linears&quot;));
  contentMetadata.setIdentifier(&quot;demo&quot;);

  // Request Settings:
  // Adding mid-rolls
  List&lt;Float&gt; midrollCuePoints = new ArrayList&lt;&gt;();
  midrollCuePoints.add(60f);
  requestSettings.setLinearPlaybackPositions(midrollCuePoints);

  // Create and return the PulseSession
  return Pulse.createSession(contentMetadata, requestSettings);
}</code></pre>
  </li>
  <li>
    <p>
      Implementar el <code translate="No">onOpenClickthrough</code> método, que se llama cuando el <strong>aprende más</strong> se hace clic en el botón de un anuncio lineal. Una acción típica para esta devolución de llamada es abrir el navegador con la URL esperada.
    </p>
    <pre class="line-numbers"><code class="language-java" translate="No">@Override
public void onOpenClickthrough(@NonNull PulseVideoAd pulseVideoAd) {
  Intent intent = new Intent(Intent.ACTION_VIEW)
    .setData(Uri.parse(pulseVideoAd.getClickthroughURL().toString()));
  brightcoveVideoView.getContext().startActivity(intent);
  pulseVideoAd.adClickThroughTriggered();
}</code></pre>
  </li>
  <li>
    <p>
      Reproduce tu contenido
    </p>
    <pre class="line-numbers"><code class="language-java" translate="No">Catalog catalog = new Catalog.Builder(
  eventEmitter,
  getString(R.string.account))
  .setPolicy(getString(R.string.policy))
  .build();

catalog.findVideoByID(getString(R.string.videoId), new VideoListener() {
  // Add the video found to the queue with add().
  // Start playback of the video with start().
  @Override
  public void onVideo(Video video) {
    brightcoveVideoView.add(video);
    brightcoveVideoView.start();
  }
});</code></pre>
  </li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Pulse_Pause_Ads">Anuncios de pausa de pulso</h2>
<p>Cuando la campaña Pulse tiene configurada la opción "Pausar anuncios", el complemento Pulse le mostrará al usuario cuando el contenido esté en pausa.</p>
</section>

<section class="bcls-section">
<h2 id="Error_handling">Manejo de errores</h2>
<p>Todos los errores se mostrarán al desarrollador mediante el evento EventType.AD_ERROR, como se muestra a continuación:</p>
<pre class="line-numbers"><code class="language-java" translate="No">eventEmitter.on(EventType.AD_ERROR, event -&gt; {
    Throwable error = event.getProperty(Event.ERROR, Throwable.class);
    Log.e(TAG, &quot;AD_ERROR: &quot;, error);
});</code></pre>
</section>

<section class="bcls-section">
<h2 id="UI_Customization">Personalización de la interfaz de usuario</h2>
<p>Internamente, el complemento Pulse infla el <code translate="No">PulseAdView</code> utilizando la <code translate="No">R.layout.pulse_ad_view</code> ID de diseño. Para un diseño diferente, puede crear un archivo de diseño con el mismo nombre y agregarlo al <strong>res / diseño</strong> directorio. Esto anula el diseño predeterminado. </p>
<p>
  Utilice los siguientes identificadores para reemplazar los valores predeterminados:
</p>
<figure class="bcls-figure">
  <img class="bcls-image--no-border" width="800" src="/assets/images/android/advertising/component-views.png/component-views.png" alt="Component Views">
  <figcaption class="bcls-caption--image">Vistas de componentes</figcaption>
</figure>
<table class="bcls-table">
  <thead class="bcls-table__head">
    <tr>
      <th>Índice</th>
      <th>Tipo de vista</th>
      <th>Ver ID</th>
    </tr>
  </thead>
  <tbody class="bcls-table__body">
    <tr>
      <td>A</td>
      <td>Vista de texto</td>
      <td><code translate="No">pulse_ad_number_view</code></td>
    </tr>
    <tr>
      <td>B</td>
      <td>Vista de texto</td>
      <td><code translate="No">pulse_ad_countdown_view</code></td>
    </tr>
    <tr>
      <td>C</td>
      <td>Vista de texto</td>
      <td><code translate="No">pulse_ad_name_view</code></td>
    </tr>
    <tr>
      <td>D</td>
      <td>Vista de texto</td>
      <td><code translate="No">pulse_ad_learn_more_view</code></td>
    </tr>
    <tr>
      <td>E</td>
      <td>Vista de texto</td>
      <td><code translate="No">pulse_skip_ad_view</code></td>
    </tr>
  </tbody>
</table>
</section>

<section class="bcls-section">
<h2 id="Complete_code_sample">Ejemplo de código completo</h2>
<p>Aquí hay una muestra de código completa para usar el complemento Pulse con el SDK nativo para Android.</p>

<details>
    <summary><h2 id="Activity">Actividad</h2></summary>
  <p>
    A continuación, se muestra un ejemplo del código de actividad completo:
  </p>
  <pre class="line-numbers"><code class="language-java" translate="No">public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
      setContentView(R.layout.activity_main);

      final BrightcoveVideoView videoView = findViewById(R.id.video_view);
      super.onCreate(savedInstanceState);

      EventEmitter eventEmitter = videoView.getEventEmitter();

      // Pulse setup
      PulseComponent pulseComponent = new PulseComponent(
          &quot;https://pulse-demo.videoplaza.tv&quot;,
          eventEmitter,
          videoView);

      pulseComponent.setListener(new PulseComponent.Listener() {
          @NonNull
          @Override
          public PulseSession onCreatePulseSession(
                @NonNull String pulseHostUrl,
                @NonNull Video video,
                @NonNull ContentMetadata contentMetadata,
                @NonNull RequestSettings requestSettings) {
            Pulse.setPulseHost(pulseHostUrl, null, null);
            contentMetadata.setCategory(&quot;skip-always&quot;);
            contentMetadata.setTags(Collections.singletonList(&quot;standard-linears&quot;));
            contentMetadata.setIdentifier(&quot;demo&quot;);

            // Adding mid-rolls
            List&lt;Float&gt; midrollCuePoints = new ArrayList&lt;&gt;();
            midrollCuePoints.add(60f);
            requestSettings.setLinearPlaybackPositions(midrollCuePoints);

            return Pulse.createSession(
              contentMetadata,
              requestSettings);
          }

          @Override
          public void onOpenClickthrough(@NonNull PulseVideoAd ad) {
            Intent intent = new Intent(Intent.ACTION_VIEW)
              .setData(Uri.parse(ad.getClickthroughURL().toString()));
            videoView.getContext().startActivity(intent);
            ad.adClickThroughTriggered();
          }
      });

      Catalog catalog = new Catalog.Builder(eventEmitter, &quot;YourAccountId&quot;)
          .setPolicy(&quot;YourPolicyKey&quot;)
          .build();
      catalog.findVideoByID(&quot;YourVideoId&quot;, new VideoListener() {

        // Add the video found to the queue with add().
        // Start playback of the video with start().
        @Override
        public void onVideo(Video video) {
          videoView.add(video);
          videoView.start();
        }
      });
    }
  }</code></pre>
</details>
<br/>

<details>
    <summary><h2 id="Layout">Diseño</h2></summary>
  <p>
    A continuación se muestra un ejemplo del código de diseño para <code translate="No">R.layout.pulse_ad_view</code>.
  </p>
  <pre class="line-numbers"><code class="language-xml" translate="No">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
  &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
      xmlns:tools=&quot;http://schemas.android.com/tools&quot;
      android:layout_width=&quot;match_parent&quot;
      android:layout_height=&quot;match_parent&quot;&gt;

      &lt;RelativeLayout
          android:id=&quot;@+id/view_ad_details&quot;
          android:layout_width=&quot;match_parent&quot;
          android:layout_height=&quot;wrap_content&quot;
          android:background=&quot;@drawable/pulse_skip_button_background_selector&quot;&gt;

          &lt;TextView
              android:id=&quot;@+id/pulse_ad_name_view&quot;
              android:layout_width=&quot;wrap_content&quot;
              android:layout_height=&quot;wrap_content&quot;
              android:layout_alignParentTop=&quot;true&quot;
              android:layout_marginTop=&quot;4dp&quot;
              android:paddingTop=&quot;4dp&quot;
              android:paddingStart=&quot;8dp&quot;
              android:paddingEnd=&quot;8dp&quot;
              android:textColor=&quot;@color/white&quot;
              android:background=&quot;@color/bmc_live&quot;
              android:textStyle=&quot;bold&quot;
              tools:text=&quot;Preroll blue&quot;/&gt;

          &lt;TextView
              android:id=&quot;@+id/pulse_ad_number_view&quot;
              android:layout_width=&quot;wrap_content&quot;
              android:layout_height=&quot;wrap_content&quot;
              android:paddingStart=&quot;8dp&quot;
              android:paddingEnd=&quot;4dp&quot;
              android:paddingBottom=&quot;4dp&quot;
              android:layout_marginBottom=&quot;8dp&quot;
              android:layout_below=&quot;@id/pulse_ad_name_view&quot;
              android:textColor=&quot;@color/white&quot;
              android:background=&quot;@color/white_semi_trans&quot;
              tools:text=&quot;Ad (1 of 2)&quot;/&gt;

          &lt;TextView
              android:id=&quot;@+id/pulse_ad_countdown_view&quot;
              android:layout_width=&quot;wrap_content&quot;
              android:layout_height=&quot;wrap_content&quot;
              android:paddingStart=&quot;4dp&quot;
              android:paddingEnd=&quot;4dp&quot;
              android:paddingBottom=&quot;4dp&quot;
              android:layout_marginBottom=&quot;4dp&quot;
              android:layout_below=&quot;@id/pulse_ad_name_view&quot;
              android:layout_toEndOf=&quot;@+id/pulse_ad_number_view&quot;
              android:textColor=&quot;@color/green_almost_opaque&quot;
              android:text=&quot;&quot;
              tools:text=&quot;00:06&quot;/&gt;

          &lt;TextView
              android:id=&quot;@+id/pulse_ad_learn_more_view&quot;
              android:layout_width=&quot;wrap_content&quot;
              android:layout_height=&quot;wrap_content&quot;
              android:layout_marginStart=&quot;@dimen/pulse_ad_learn_more_margin_left&quot;
              android:layout_marginTop=&quot;@dimen/pulse_ad_learn_more_margin_top&quot;
              android:layout_marginEnd=&quot;@dimen/pulse_ad_learn_more_margin_right&quot;
              android:layout_marginBottom=&quot;@dimen/pulse_ad_learn_more_margin_bottom&quot;
              android:layout_alignTop=&quot;@id/pulse_ad_name_view&quot;
              android:layout_alignBottom=&quot;@id/pulse_ad_countdown_view&quot;
              android:layout_alignParentEnd=&quot;true&quot;
              android:background=&quot;@drawable/pulse_learn_more_button_background&quot;
              android:paddingStart=&quot;12dp&quot;
              android:paddingEnd=&quot;12dp&quot;
              android:padding=&quot;@dimen/pulse_ad_learn_more_padding_default&quot;
              android:gravity=&quot;center&quot;
              android:shadowColor=&quot;@color/brightcove_semitransparent&quot;
              android:shadowDx=&quot;-1&quot;
              android:shadowDy=&quot;1&quot;
              android:shadowRadius=&quot;1.5&quot;
              android:text=&quot;@string/pulse_message_learn_more&quot;
              android:textColor=&quot;@color/pulse_button_text_color&quot;
              android:nextFocusUp=&quot;@id/pulse_skip_ad_view&quot;
              android:textSize=&quot;@dimen/pulse_message_text_size&quot;
              android:visibility=&quot;gone&quot;
              tools:visibility=&quot;visible&quot; /&gt;

      &lt;/RelativeLayout&gt;

      &lt;TextView
          android:id=&quot;@+id/pulse_skip_ad_view&quot;
          android:layout_width=&quot;wrap_content&quot;
          android:layout_height=&quot;wrap_content&quot;
          android:maxWidth=&quot;164dp&quot;
          android:layout_alignParentEnd=&quot;true&quot;
          android:layout_centerVertical=&quot;true&quot;
          android:layout_marginBottom=&quot;@dimen/pulse_skip_ad_margin_bottom&quot;
          android:background=&quot;@drawable/pulse_skip_button_background_selector&quot;
          android:ellipsize=&quot;none&quot;
          android:gravity=&quot;center&quot;
          android:maxLines=&quot;2&quot;
          android:paddingStart=&quot;@dimen/pulse_skip_ad_padding_left&quot;
          android:paddingEnd=&quot;@dimen/pulse_skip_ad_padding_right&quot;
          android:paddingTop=&quot;@dimen/pulse_skip_ad_padding&quot;
          android:paddingBottom=&quot;@dimen/pulse_skip_ad_padding&quot;
          android:scrollHorizontally=&quot;false&quot;
          android:shadowColor=&quot;@color/brightcove_shadow&quot;
          android:shadowDx=&quot;-1&quot;
          android:shadowDy=&quot;1&quot;
          android:shadowRadius=&quot;1.5&quot;
          android:text=&quot;@string/pulse_message_skip_ad&quot;
          android:textColor=&quot;@color/pulse_button_text_color&quot;
          android:textSize=&quot;@dimen/pulse_message_text_size&quot;
          android:visibility=&quot;gone&quot;
          android:nextFocusUp=&quot;@id/pulse_ad_learn_more_view&quot;
          android:focusable=&quot;true&quot;
          tools:visibility=&quot;visible&quot;/&gt;

  &lt;/RelativeLayout&gt;
  </code></pre>
</details>
</section>
</article>