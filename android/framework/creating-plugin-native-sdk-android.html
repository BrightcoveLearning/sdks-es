---
title: 'Creación de un complemento para el SDK nativo para Android'
description: En este tema, aprenderá a crear un complemento para el SDK nativo para Android.
parent: Framework 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">Descripción general</h2>

<p>En un nivel alto, un complemento se integra con el reproductor escuchando y emitiendo eventos. Un complemento puede escuchar eventos del reproductor y de otros complementos. Un complemento puede emitir eventos para el reproductor y para otros complementos.</p>

<p>Este contenido junto con el código de muestra se encuentra en <a href="https://github.com/BrightcoveOS/android-plugin-guide">https://github.com/BrightcoveOS/android-plugin-guide</a></p>
</section>

<section class="bcls-section">
<h2 id="Plugin_architecture">Arquitectura de complementos</h2>

<div class="BCL-concept">
<p>Un complemento debe registrarse con el SDK cuando se crea una instancia. Para registrar un complemento debe emitir un <code translate="No">REGISTER_PLUGIN</code> evento con un <code translate="No">PLUGIN_NAME</code> propiedad. Por ejemplo:</p>

<pre class="line-numbers">
  <code class="language-java" translate="No">Map&lt;String, Object&gt; properties = new HashMap&lt;String, Object&gt;();
  properties.put(Event.PLUGIN_NAME, "my custom plugin");
  eventEmitter.emit(EventType.REGISTER_PLUGIN, properties);</code></pre>

<p>La reproducción de video generalmente pasa por un flujo de eventos de ciclo de vida estándar:</p>

<figure class="bcls-figure"><img class="bcls-image" alt="Plugin event flow" src="/assets/images/android/framework/plugin-event-flow.png" />
<figcaption class="bcls-caption--image">Flujo de eventos de complemento</figcaption>
</figure>
</div>
</section>

<section class="bcls-section">
<h2 id="Event_details">Detalles del evento</h2>

<div class="BCL-concept">
<p>Un complemento puede escuchar eventos, que inician alguna acción, para cambiar el comportamiento predeterminado del reproductor. Estos eventos incluyen:</p>

<ol>
	<li><code translate="No">WILL_CHANGE_VIDEO</code></li>
	<li><code translate="No">SET_VIDEO</code></li>
	<li><code translate="No">SET_SOURCE</code></li>
	<li><code translate="No">PLAY</code></li>
	<li><code translate="No">PAUSE</code></li>
	<li><code translate="No">SEEK_TO</code></li>
	<li><code translate="No">STOP</code></li>
</ol>

<p>El comportamiento predeterminado se puede cambiar evitando que los oyentes predeterminados reciban el evento y / o deteniendo la propagación del evento a los oyentes no predeterminados. Evitar que los oyentes predeterminados reciban el evento se logra llamando al <code translate="No">preventDefault()</code> método. La propagación de eventos se puede detener llamando al <code translate="No">stopPropagation()</code> método. si solo <code translate="No">preventDefault()</code> se llama, se notificará al resto de los oyentes no predeterminados. si solo <code translate="No">stopPropagation()</code> se llama, los oyentes predeterminados aún serán notificados, pero el resto de los oyentes no predeterminados se omitirán. Un complemento también puede utilizar estos métodos para pausar el flujo de eventos normal e insertar un comportamiento adicional, como inicializar el complemento. Un complemento puede reanudar el flujo de eventos emitiendo nuevamente el evento original.</p>

<p>Un complemento también puede escuchar eventos, que indican la finalización de una acción. Estos eventos suelen ser utilizados por complementos de análisis. Los eventos incluyen:</p>

<ol>
	<li><code translate="No">DID_CHANGE_LIST</code></li>
	<li><code translate="No">DID_SELECT_SOURCE</code></li>
	<li><code translate="No">DID_PAUSE</code></li>
	<li><code translate="No">DID_PLAY</code></li>
	<li><code translate="No">DID_SEEK_TO</code></li>
	<li><code translate="No">DID_SET_SOURCE</code></li>
	<li><code translate="No">DID_STOP</code></li>
	<li><code translate="No">PROGRESS</code></li>
	<li><code translate="No">COMPLETED</code></li>
</ol>
</div>
</section>

<section class="bcls-section">
<h2 id="Interrupt_playback">Interrumpir la reproducción</h2>

<div class="BCL-concept">
<p>Un complemento, que desea interrumpir la reproducción del contenido de video, debe usar <code translate="No">WILL_INTERRUPT_CONTENT</code> y <code translate="No">WILL_RESUME_CONTENT</code>. Estos eventos suelen ser utilizados por complementos publicitarios. Un complemento debería emitir <code translate="No">WILL_INTERRUPT_CONTENT</code> para solicitar que se suspenda la reproducción, si se está reproduciendo actualmente, y para solicitar que la visualización del video se haga invisible. Un complemento debería emitir <code translate="No">WILL_RESUME_CONTENT</code> para solicitar que la visualización del video vuelva a ser visible. La <code translate="No">WILL_RESUME_CONTENT</code> El evento debe incluir un <code translate="No">ORIGINAL_EVENT</code> propiedad que se emitirá después de que la vista del video se haga visible. La <code translate="No">ORIGINAL_EVENT</code> debería ser un <code translate="No">PLAY</code> evento para reanudar la reproducción, <code translate="No">CUE_POINT</code> evento para continuar el procesamiento del punto de referencia, o un <code translate="No">COMPLETED</code> evento para completar la reproducción. A <code translate="No">SKIP_CUE_POINTS</code> la propiedad debe agregarse a la <code translate="No">ORIGINAL_EVENT</code> para evitar el procesamiento recursivo de puntos de referencia.</p>
</div>
</section>

<section class="bcls-section">
<h2 id="Cue_points">Puntos de referencia</h2>

<div class="BCL-concept">
<p>Muchos complementos querrán escuchar <code translate="No">CUE_POINT</code> eventos. Hay tres tipos de puntos de referencia, <code translate="No">BEFORE</code> , <code translate="No">POINT_IN_TIME</code> , y <code translate="No">AFTER</code> . <code translate="No">BEFORE</code> los puntos de referencia se emiten justo antes de que comience la reproducción. <code translate="No">POINT_IN_TIME</code> Los puntos de referencia se emiten cuando la reproducción alcanza la posición del punto de referencia. <code translate="No">AFTER</code> los puntos de referencia se emiten justo después de que se completa la reproducción. Un complemento debería usar <code translate="No">WILL_INTERRUPT_CONTENT</code> y <code translate="No">WILL_RESUME_CONTENT</code> eventos para interrumpir y reanudar la reproducción de contenido cuando se maneja un evento de punto de referencia. En el caso de puntos de referencia antes y después, el evento incluirá un <code translate="No">ORIGINAL_EVENT</code> propiedad, ya sea con un <code translate="No">PLAY</code> evento o un <code translate="No">COMPLETED</code> evento. Los eventos de punto de referencia también incluyen un <code translate="No">CUE_POINTS</code> propiedad con el lote de puntos de referencia. <code translate="No">START_TIME</code> y <code translate="No">END_TIME</code> Las propiedades definen el rango de tiempo del punto de referencia.</p>
</div>
</section>

<section class="bcls-section">
<h2 id="Sample_directory">Directorio de muestra</h2>

<div class="BCL-concept">
<p>La <a href="https://github.com/BrightcoveOS/android-plugin-guide/tree/master/sample">directorio de muestra</a> incluye un proyecto basado en Android Studio con dos módulos:</p>

<ul>
	<li><strong>SamplePlugin</strong> - Un complemento de ejemplo, que se puede utilizar como base para escribir nuevos complementos.</li>
	<li><strong>SamplePluginApplication</strong> - Muestra cómo los complementos se incorporan en una aplicación de video de Brightcove y se pueden usar para probar el SamplePlugin o nuevos complementos.</li>
</ul>
</div>
</section>

<section class="bcls-section">
<h2 id="Implementation_steps">Pasos de implementación</h2>

<div class="BCL-concept">
<p>Los pasos para escribir un complemento incluyen:</p>

<ol>
	<li>Copie el complemento de muestra en un nuevo repositorio.</li>
	<li>Cambie el paquete y los nombres de la clase.</li>
	<li>Actualizar el <code translate="No">TAG</code> inicializador.</li>
	<li>Edite el <code translate="No">@Emits</code> y <code translate="No">@ListensFor</code> anotaciones para reflejar los eventos que el complemento emite y escucha.</li>
	<li>Modifique el constructor según sea necesario.</li>
	<li>Reemplace o quite el <code translate="No">videoView</code> lógica relacionada según sea necesario.</li>
	<li>Modificar <code translate="No">initializeListeners()</code> agregando y / o restando detectores de eventos según sea necesario.</li>
	<li>Compile y distribuya su complemento como <strong>.aar</strong> archivo para Android Studio.</li>
	<!--                <li>Compile and distribute your plugin as a .jar file for Eclipse and/or an .aar file for Android Studio.</li>-->
</ol>
</div>
</section>
</article>