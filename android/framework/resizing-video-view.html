---
title: 'Cambiar el tamaño de la vista de video con el SDK nativo para Android'
description: En este tema, aprenderá cómo cambiar el tamaño / estirar la Vista de video interna para llenar el <code translate="No">BrightcoveVideoView</code> al trabajar con el SDK nativo para Android.
parent: Framework 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">Descripción general</h2>
<p>Como desarrollador, puede cambiar el comportamiento predeterminado de cómo se muestra el video en la vista de video. Puede cambiar el tamaño / estirar la vista de video interna (<code translate="No">SurfaceView</code>/<code translate="No">TextureView</code> ) para llenar el <code translate="No">BrightcoveVideoView</code> (<code translate="No">FrameLayout</code>). Para hacer esto, puede escuchar el <code translate="No">EventType.VIDEO_SIZE_KNOWN</code> evento, haga algunos cálculos matemáticos y establezca los valores de visualización.</p>
<p>Hay dos formas de cambiar la vista de video:</p>
<ul>
  <li>
    <a href="#Resizing_the_container">Cambiar el tamaño del contenedor (<code translate="No">BaseVideoView</code>/<code translate="No">FrameLayout</code>)</a>
  </li>
  <li>
    <a href="#Resizing_the_video">Cambiar el tamaño del video (<code translate="No">SurfaceView</code>)</a>
  </li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Resizing_the_container">Cambiar el tamaño del contenedor</h2>
<p>Es posible que desee desarrollar una aplicación que configure la Vista de video para que se ajuste a toda la pantalla del dispositivo en modo vertical. Puede hacer esto cambiando el tamaño del contenedor (<code translate="No">BaseVideoView</code>/<code translate="No">FrameLayout</code>).</p>
<aside class="bcls-aside bcls-aside--information">Porque el <code translate="No">Video</code> La altura es inicialmente desconocida, coincidirá con el tamaño de la vista principal (toda la pantalla en el <a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/BasicSampleApp/src/main">BasicSampleApp</a> ) hasta el <code translate="No">VIDEO_SIZE_KNOWN</code> se activa el evento. Entonces el <code translate="No">BaseVideoView</code> envolverá el <code translate="No">SurfaceView</code>. Al cambiar el tamaño del contenedor, es posible que vea un parpadeo inicial.</aside>

<h3>Establecer la propiedad del contenedor</h3>
<p>Si ve márgenes negros alrededor de su video, puede intentar configurar el <code translate="No">BrightcoveVideoView</code> <code translate="No">layout-height</code>.</p>
<ol class="bcls-tasklist">
    <li>Abra el XML <strong>diseño</strong> expediente.</li>
    <li>Selecciona el <code translate="No">BrightcoveVideoView layout-height</code> a <code translate="No">wrap_content</code>.</li>
    <li>Puede experimentar un parpadeo inicial como se explica en la nota anterior.</li>
</ol>

<h3>Establecer el tamaño de la vista de video</h3>
<p>Otra forma de controlar la Vista de video es establecer el tamaño mediante programación.</p>
<ol class="bcls-tasklist-restart">
    <li>Para minimizar el parpadeo inicial, intente configurar el <code translate="No">layout_height</code> a un valor específico (por ejemplo, 280 dp). El objetivo es que la altura establecida se acerque a la altura calculada.</li>
    <li>Escuche el <code translate="No">EventType.VIDEO_SIZE_KNOWN</code> evento.</li>
    <li>Consigue el <code translate="No">Event.VIDEO_WIDTH</code> y <code translate="No">Event.VIDEO_HEIGHT</code></li>
    <li>Con esos valores, determine la relación de aspecto.</li>
    <li>Utilice la relación de aspecto para calcular el ancho y el alto en la pantalla.</li>
</ol>
<p>Esta solución se verá similar a esto:</p>
<pre class="line-numbers">
<code class="language-java" translate="No">//Event sent when we know the Video dimensions.
eventEmitter.on(EventType.VIDEO_SIZE_KNOWN, new EventListener() {
  @Override
  public void processEvent(Event event) {
    // Get the width and height
    float width = event.getIntegerProperty(Event.VIDEO_WIDTH);
    float height = event.getIntegerProperty(Event.VIDEO_HEIGHT);
    float aspectRatio = height/width;

    //Get the display metrics
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    int videoWidth = metrics.widthPixels; // We cover the entire display's width
    int videoHeight = (int) (videoWidth*aspectRatio); //Calculate the height based on the ratio

    // Set the layout params
    brightcoveVideoView.setLayoutParams(new FrameLayout.LayoutParams(videoWidth,videoHeight));
  }
});
</code></pre>
<p>Al agregar una vista, deberá anular los parámetros de diseño. Para obtener más detalles, consulte la <a href="/android/framework/android-adding-viewmanaging-layout.html">Androide: Agregar vista / administrar diseño</a> documento.</p>
</section>

<section class="bcls-section">
<h2 id="Resizing_the_video">Cambiar el tamaño del video</h2>
<p>Es posible que desee implementar un doble toque que llene la pantalla. Esto tomaría un video 16: 9 y llenaría la pantalla en un dispositivo 18: 9 o 19: 9.</p>
<p>Puede hacer esto cambiando el tamaño del video real (<code translate="No">SurfaceView</code>).</p>
<ol class="bcls-tasklist-restart">
    <li>
      <p>
        Si establece el ancho y el alto en el <code translate="No">renderView</code> para que coincida con el tamaño de la pantalla del dispositivo, el video cambiará de tamaño para que coincida con la pantalla completa.
      </p>
      <aside class="bcls-aside bcls-aside--information">Esto no estira el video real. Lo haremos en el siguiente paso.</aside>
      <pre class="line-numbers">
<code class="language-java" translate="No">//Event sent when we know the Video dimensions.
eventEmitter.on(EventType.VIDEO_SIZE_KNOWN, new EventListener() {
  @Override
  public void processEvent(Event event) {
    // Get the width and height
    float width = event.getIntegerProperty(Event.VIDEO_WIDTH);
    float height = event.getIntegerProperty(Event.VIDEO_HEIGHT);
    float aspectRatio = height/width;

    //Get the display metrics
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    int videoWidth = metrics.widthPixels; // We cover the entire display's width
    int videoHeight = (int) (videoWidth*aspectRatio); //Calculate the height based on the ratio

    // Set the video size
    brightcoveVideoView.getRenderView().setVideoSize(videoWidth, videoHeight);
  }
});
</code></pre>
    </li>
    <li>
      <p>
        El siguiente código actualiza la vista de video subyacente (p. Ej. <code translate="No">SurfaceView</code> ) para que coincida con su padre <code translate="No">BaseVideoView</code> (<code translate="No">FrameLayout</code>). Hay varias cosas a tener en cuenta:
      </p>
      <ul>
        <li>
          Necesitas escuchar el <code translate="No">VIDEO_SIZE_KNOWN</code> evento al entrar y salir de la pantalla completa, y al girar el dispositivo.
        </li>
        <li>
          Debe decidir cuándo actualizar su vista para las condiciones anteriores.
        </li>
      </ul>
  <p>Un escenario podría ser que establezca el <code translate="No">BaseVideoView layout_height</code> a <code translate="No">280dp</code> y luego cambiar el tamaño del <code translate="No">SurfaceView</code> para igualar <code translate="No">280dp</code>. La relación de aspecto se modificará ligeramente. Si un usuario pasa a pantalla completa en modo vertical y <code translate="No">updateVideoViewMatchToParent()</code> se llama, entonces tanto el <code translate="No">BaseVideoView</code> y <code translate="No">SurfaceView</code> llenará la pantalla del dispositivo y la relación de aspecto del video se modificará ligeramente.</p>
<pre class="line-numbers">
<code class="language-java" translate="No">public void updateVideoViewMatchToParent(@NonNull BaseVideoView brightcoveVideoView) {
  RenderView renderView = brightcoveVideoView.getRenderView();
  if (renderView != null) {
      renderView.setVideoSize(brightcoveVideoView.getWidth(), brightcoveVideoView.getHeight());
  }
}
</code></pre>
<p>Para detectar el doble toque, puede utilizar el <a href="https://developer.android.com/reference/android/view/GestureDetector.OnDoubleTapListener">GestureDetector.OnDoubleTapListener</a> interfaz. Para obtener más detalles, consulte la <a href="https://developer.android.com/training/gestures/detector">Detecta gestos comunes</a> documento.</p>
    </li>
</ol>
<p>Si desea estirar el video sin tener en cuenta la relación de aspecto (sin recortar el video), puede intentar esto:</p>
<pre class="line-numbers">
<code class="language-java" translate="No">eventEmitter.on(EventType.VIDEO_SIZE_KNOWN, new EventListener() {
  @Override
  public void processEvent(Event event) {
      //Get the display metrics
      DisplayMetrics metrics = new DisplayMetrics();
      getWindowManager().getDefaultDisplay().getMetrics(metrics);

      int videoHeight = metrics.heightPixels;
      int videoWidth = metrics.widthPixels;
      brightcoveVideoView.getRenderView().setVideoSize(videoWidth, videoHeight);
  }
});
</code></pre>
<aside class="bcls-aside bcls-aside--information"> Es importante que el <code translate="No">BaseVideoView</code> usos <code translate="No">match_parent</code> para ambos <code translate="No">layout_width</code> y <code translate="No">layout_height</code> Para el <code translate="No">SurfaceView</code> para llenar la pantalla del dispositivo.</aside>

<p>Tenga en cuenta que los valores que obtiene se ven afectados por la orientación del dispositivo. Para estirar el video tanto en vertical como en horizontal, debe hacer lo siguiente:</p>
<ol class="bcls-tasklist-restart">
    <li>
      <p>
        Anule lo siguiente <code translate="No">Activity</code>:
      </p> 
      <pre>
<code class="language-java" translate="No">public void onConfigurationChanged(Configuration configuration)</code>
</pre>
    </li>
    <li>Restablece el tamaño del video.</li>
</ol>
</section>

</article>