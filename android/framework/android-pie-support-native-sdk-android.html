---
title: 'Soporte de Android Pie con el SDK nativo para Android'
description: En este tema, aprenderá a usar Android Pie con Brightcove Native SDK para Android.
parent: Framework 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">Descripción general</h2>

<p>Android Pie es el sistema operativo Android más nuevo y se lanzó oficialmente el 6 de agosto de 2018. Para obtener detalles sobre las funciones, consulte la <a href="https://developer.android.com/about/versions/pie/android-9.0">Funciones de Android Pie</a> documento. Android Pie incluye varios cambios de comportamiento. La mayoría de ellos afectan a aplicaciones que se dirigen a Android Pie (nivel de API 28), pero también puede encontrar problemas con aplicaciones que se dirigen a una versión anterior de Android, que se ejecuta en un dispositivo Android Pie.</p>

<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Android 9 Pie" src="/assets/images/android/framework/android-pie.png" />
<figcaption class="bcls-caption--image">Android 9 Pie</figcaption>
</figure>

<p>Hay un par de cambios que debe tener en cuenta al utilizar Brightcove SDK para Android:</p>

<ul>
	<li><a href="">TLS habilitado de forma predeterminada</a></li>
	<li><a href="">Desactivación del cliente HTTP Apache</a></li>
	<li><a href="">Constantes obsoletas</a></li>
</ul>

<p>Para obtener una lista completa de los cambios de comportamiento de sus aplicaciones, consulte la <a href="https://developer.android.com/about/versions/pie/android-9.0-changes-all">Cambios de comportamiento para todas las aplicaciones</a> documento. Para cambios de comportamiento exclusivos al apuntar a Android Pie, consulte el <a href="https://developer.android.com/about/versions/pie/android-9.0-changes-28">Cambios de comportamiento para API 28+</a> documento.</p>
</section>

<section class="bcls-section">
<h2 id="TLS_enabled_by_default">TLS habilitado de forma predeterminada</h2>

<p>Transport Layer Security (TLS) es un protocolo para proporcionar comunicaciones seguras a través de una red informática. TLS se implementa sobre HTTP, lo que permite la comunicación cifrada a través de HTTPS.</p>

<p>Cuando Google lanzó Android Marshmallow (API nivel 23), proporcionó una configuración para deshabilitar el tráfico de texto sin cifrar, lo que evitaría que su aplicación hiciera solicitudes HTTP claras. Con el lanzamiento de Android Pie (API nivel 28), el tráfico de texto sin cifrar está deshabilitado de forma predeterminada.</p>

<p>Con el tráfico de texto sin cifrar deshabilitado de forma predeterminada, si su aplicación intenta realizar una solicitud HTTP clara, se lanza una IOException con el siguiente mensaje:</p>

<pre>
<code class="language-java" translate="No">Exception: IOException java.io.IOException: Cleartext HTTP traffic to * not permitted</code></pre>

<p>Para obtener más información, visite el sitio web de Google: <a href="https://developer.android.com/about/versions/pie/android-9.0-changes-28#framework-security-changes">Cambios en la seguridad del marco</a> y <a href="https://developer.android.com/training/articles/security-config">Configuración de seguridad de la red</a>.</p>

<p>Si su aplicación apunta a Android Pie (API nivel 28) o superior, debe manejar este cambio de comportamiento para que su aplicación funcione como se espera. Tienes tres opciones:</p>

<ul>
	<li><a href="#HTTPS_only">Asegúrese de que su aplicación solo realice solicitudes HTTPS</a></li>
	<li><a href="#HTTP_for_all_domains">Habilite el tráfico HTTP claro para todos los dominios</a></li>
	<li><a href="#HTTP_for_specific_domains">Habilite el tráfico HTTP claro para dominios específicos</a></li>
</ul>
<!-- <p>With the release of Android Pie (API level 28), clear text traffic is disabled by default. If your application attempts to do a clear HTTP request, an <code translate="No">IOException</code> will be thrown with the message:</p>
  <pre><code class="language-java" translate="No">Exception: IOException java.io.IOException: Cleartext HTTP traffic to * not permitted</code></pre>
  <p>
    To learn more about managing TLS with Android Pie, see the following document:
https://docs.google.com/document/d/1PfXOq59MG8s87gcwiZvzWCZ_CuKDpLi3VO-VRF_LkjY/edit?usp=sharing
  </p> -->

<h3 id="HTTPS_only">Solo HTTPS</h3>

<p>Una opción es asegurarse de que todas sus solicitudes de red utilicen HTTPS. Para hacerlo, siga estos pasos:</p>

<ol class="bcls-tasklist__restart">
	<li>
	<p>Habilite su CDN para una comunicación segura.</p>

	<ul>
		<li>Los clientes de Video Cloud (ya sea que utilicen la CDN propia o una CDN con nombre) deben comunicarse con sus administradores de cuentas de Brightcove para asegurarse de que las cuentas estén configuradas para entregar a través de HTTPS.</li>
		<li>
			<p>
				Para aquellos que usan activos remotos, es posible que deba configurar su CDN de manera adecuada.
			</p>
		<aside class="bcls-aside bcls-aside--information">Si está utilizando BYO CDN, debe pasar el <code translate="No">X-Forwarded-Proto: https</code> encabezados. Para Akamai o Cloudfront, puede utilizar <code translate="No">X-Forwarded-Proto-Akamai</code> o <code translate="No">CloudFront-Forwarded-Proto</code> respectivamente.</aside></li>
	</ul>
	</li>
	<li>
	<p>Utilice una comunicación segura para entregar su contenido multimedia. Esto incluye videos, anuncios, subtítulos, imágenes de carteles, miniaturas y otras conexiones API de terceros.</p>

	<ul>
		<li>
		<p>Clientes de Video Cloud: Utilice la API de reproducción para recuperar el protocolo seguro para cada uno de sus activos. Brightcove SDK para Android selecciona HTTPS de forma predeterminada cuando está disponible.</p>

		<aside class="bcls-aside bcls-aside--information">Si su video tiene fuentes HTTP y HTTPS para títulos / subtítulos WebVTT, es posible que el SDK nativo para Android no devuelva la versión HTTPS. Brightcove es consciente de esta situación y tendrá una solución en una versión futura.</aside>
		</li>
		<li>Clientes de Brightcove Player: Asegúrese de que su contenido multimedia se entregue a través de HTTPS.</li>
	</ul>
	</li>
</ol>

<h3 id="HTTP_for_all_domains">HTTP para todos los dominios</h3>

<p>Su aplicación puede utilizar tráfico HTTP claro para todos los dominios. Aquí hay dos ejemplos de cómo puede hacer esto:</p>

<ul>
	<li><a href="#Update_the_application_tag">Actualizar la etiqueta de la aplicación</a></li>
	<li><a href="#Add_a_network_security_configuration_file">Agregar un archivo de configuración de seguridad de red</a></li>
</ul>

<h4 id="Update_the_application_tag">Actualizar la etiqueta de la aplicación</h4>

<ol class="bcls-tasklist__restart">
	<li>
	<p>Para habilitar esto, abra el <strong>AndroidManifest</strong> archivo y agregue la siguiente línea en el <code translate="No">application</code> etiqueta. Por ejemplo:</p>

	<pre>
<code class="language-java" translate="No">&lt;application
   android:name="mypackage.MyApplication"
   <span class="bcls-highlight">android:usesCleartextTraffic="true"&gt;</span>
…
&lt;/application&gt;</code></pre>
	</li>
</ol>

<h4 id="Add_a_network_security_configuration_file">Agregar un archivo de configuración de seguridad de red</h4>

<ol class="bcls-tasklist__restart">
	<li>
	<p>Cree un archivo xml, por ejemplo <strong>network-security-config.xml</strong> y agréguelo al <strong>res / xml</strong> directorio. Vea el siguiente ejemplo para saber cómo permitir tráfico despejado:</p>

	<pre>
<code class="language-java" translate="No">&lt;network-security-config&gt;
   &lt;base-config cleartextTrafficPermitted="true"/&gt;
&lt;/network-security-config&gt;</code></pre>
	</li>
	<li>
	<p>Establezca el nombre del archivo en su <strong>AndroidManifest</strong> Como se muestra abajo:</p>

	<pre>
<code class="language-java" translate="No">&lt;application
 android:name="mypackage.MyApplication"
 <span class="bcls-highlight">android:networkSecurityConfig="@xml/network_security_config"&gt;</span>
…
&lt;/application&gt;</code></pre>

	<p>Para obtener más detalles, consulte la <a href="https://developer.android.com/training/articles/security-config">Configuración de seguridad de la red</a> documento.</p>
	</li>
</ol>

<h3 id="HTTP_for_specific_domains">HTTP para dominios específicos</h3>

<p>Puede especificar que ciertos dominios puedan utilizar solicitudes HTTP claras. Para hacer esto, siga estos pasos:</p>

<ol class="bcls-tasklist__restart">
	<li>
	<p>Cree un archivo xml, por ejemplo <strong>network-security-config.xml</strong> y agréguelo al <strong>res / xml</strong> directorio. Vea el siguiente ejemplo para saber cómo configurar sus dominios:</p>

	<pre>
<code class="language-java" translate="No">&lt;network-security-config&gt;
 &lt;domain-config cleartextTrafficPermitted="true"&gt;
     &lt;domain includeSubdomains="true"&gt;c.brightcove.com&lt;/domain&gt;
     &lt;domain includeSubdomains="true"&gt;solutions.brightcove.com&lt;/domain&gt;
 &lt;/domain-config&gt;
&lt;/network-security-config&gt;</code></pre>
	</li>
	<li>
	<p>Establezca el nombre del archivo en su <strong>AndroidManifest</strong> Como se muestra abajo:</p>

	<pre>
<code class="language-java" translate="No">&lt;application
 android:name="mypackage.MyApplication"
 <span class="bcls-highlight">android:networkSecurityConfig="@xml/network_security_config"&gt;</span>
…
&lt;/application&gt;</code></pre>

	<p>Para obtener más detalles, consulte la <a href="https://developer.android.com/training/articles/security-config">Configuración de seguridad de la red</a> documento.</p>

	<aside class="bcls-aside bcls-aside--information">los <code translate="No">networkSecurityConfig</code> el parámetro anula el <code translate="No">usesCleartextTraffic</code> parámetro. Esto significa que si ambos están habilitados, solo los dominios declarados en el <code translate="No">networkSecurityConfig</code> El parámetro de archivo podrá utilizar solicitudes HTTP claras.</aside>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Apache_HTTP_client_deprecation">Desactivación del cliente HTTP Apache</h2>

<p>Con Android Pie, se ha eliminado la compatibilidad con el cliente HTTP Apache. Esto afecta a las aplicaciones orientadas a Android Pie o superior. También podría afectar a las aplicaciones que se dirigen a versiones anteriores de Android cuando se usa un <code translate="No">ClassLoader</code>. En tiempo de ejecución, si el <code translate="No">ClassLoader</code> intenta cargar una clase de cliente HTTP Apache en Android Pie, arrojará un <code translate="No">NoClassDefFoundError</code>. Para obtener más información, consulte Google: <a href="https://developer.android.com/about/versions/pie/android-9.0-changes-all#apache-nonp">Desactivación del cliente HTTP Apache</a> documento.</p>

<p>Si su aplicación utiliza el complemento Brightcove FreeWheel, experimentará este problema y obtendrá una excepción como se muestra aquí:</p>

<pre>
<code class="language-java" translate="No">java.lang.NoClassDefFoundError: tv.freewheel.utils.URLLoader
Caused by: java.lang.NoClassDefFoundError: Failed resolution of: Lorg/apache/http/impl/client/BasicCookieStore;</code></pre>

<p>Para solucionar este problema, incluya la siguiente línea en el archivo de manifiesto de su aplicación:</p>

<pre>
<code class="language-java" translate="No">&lt;uses-library android:name="org.apache.http.legacy" android:required="false"/&gt;</code></pre>
</section>

<section class="bcls-section">
<h2 id="Deprecated_constants">Constantes obsoletas</h2>

<p>Hay varias constantes que quedaron obsoletas en el <a href="https://developer.android.com/reference/android/net/ConnectivityManager">Administrador de conectividad</a> clase. Algunas de estas constantes son utilizadas actualmente por Brightcove SDK, específicamente por las funciones Offline Playback y Offline Analytics. Aquí está la lista:</p>

<ul>
	<li><code translate="No">android.net.ConnectivityManager.TYPE_BLUETOOTH</code></li>
	<li><code translate="No">android.net.ConnectivityManager.TYPE_ETHERNET</code></li>
	<li><code translate="No">android.net.ConnectivityManager.TYPE_MOBILE</code></li>
	<li><code translate="No">android.net.ConnectivityManager.TYPE_VPN</code></li>
	<li><code translate="No">android.net.ConnectivityManager.TYPE_WIFI</code></li>
	<li><code translate="No">android.net.ConnectivityManager.TYPE_WIMAX</code></li>
</ul>

<p>Esto no afecta a ninguna funcionalidad de las características mencionadas, pero tenga en cuenta que estas constantes pueden eliminarse en una futura versión del sistema operativo Android. Esto también se aplica al SDK nativo de Brightcove.</p>
</section>
<!-- <section class="bcls-section">
<h2 id="Testing_limitations">Testing limitations</h2>

<p>Due to resource constraints, we have been unable to test the Brightcove SDK targeting Android Pie on a device that has a "cut-out" in its display. We are working on acquiring such a device to test with as soon as possible.</p>
</section> --></article>