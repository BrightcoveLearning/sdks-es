---
title: Imagen en imagen con la descripción de los SDK nativos
description: En este tema, aprenderá cómo implementar el modo Imagen en imagen en sus aplicaciones utilizando los SDK de Brightcove Native Player.
parent: Features 
grandparent: Home
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">Descripción general</h2>

<p>El modo de imagen en imagen (PIP) permite a los usuarios realizar múltiples tareas en sus dispositivos. Con esta función, puede crear aplicaciones en las que se fija una pequeña ventana de reproducción de video en una esquina de la pantalla mientras el usuario realiza otras tareas.</p>

<figure class="bcls-figure"><img class="bcls-image--no-border" width="600" alt="Picture in picture mode" src="/assets/images/getting-started/pip/android-steps.png" />
<figcaption class="bcls-caption--image">Imagen en modo de imagen</figcaption>
</figure>
</section>

<section class="bcls-section">
<h2 id="Features">Características</h2>

<p>La función de imagen en imagen proporcionada por los SDK nativos de Brightcove admite las siguientes funciones:</p>

<ul>
	<li>Cuando un usuario ingresa una imagen en modo de imagen al hacer clic en el ícono PIP en la barra de control, un desarrollador puede ingresar al modo PIP mediante programación.</li>
	<li>El usuario puede arrastrar la ventana PIP por las esquinas de la pantalla para colocarla en la ubicación más conveniente.</li>
	<li>El usuario puede pausar y reproducir el video en la ventana PIP o eliminarlo por completo. El usuario también puede maximizar el video a la experiencia dentro de la aplicación.</li>
	<li>El modo PIP funciona sobre la aplicación, el fondo del dispositivo y otras aplicaciones.</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Supported_versions">Versiones admitidas</h2>

<p>El modo Imagen en imagen es compatible con las siguientes versiones:</p>

<h3>Versión del sistema operativo del dispositivo</h3>

<ul>
	<li><strong>Androide:</strong> Oreo 8.0+ (API nivel 26+)</li>
	<li><strong>iOS:</strong> 10.0+</li>
</ul>

<h3>Versión del SDK nativo</h3>

<ul>
	<li><strong>Androide:</strong> Brightcove Native SDK para Android versión 6.1.0+</li>
	<li><strong>iOS:</strong> SDK nativo de Brightcove para iOS versión 6.4.4+</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Android_implementation">Implementación de Android</h2>

<p>Los siguientes temas lo ayudarán a comenzar con la función de imagen en imagen:</p>

<ul>
	<li><a href="#Using_BrightcovePlayer">Uso de BrightcovePlayer</a></li>
	<li><a href="#Using_a_regular_Activity">Usar una actividad regular</a></li>
	<li><a href="#Customizing_picture_in_picture">Personalización de imagen en imagen</a></li>
</ul>

<p>Para obtener más detalles, consulte la <a href="https://developer.android.com/guide/topics/ui/picture-in-picture.html">Guía de soporte de imagen en imagen</a>.</p>

<h3 id="Using_BrightcovePlayer">Uso de BrightcovePlayer</h3>

<p>La forma más fácil de comenzar a utilizar imagen en imagen es hacer que su actividad extienda el <code translate="No">BrightcovePlayer</code>. Para hacer esto, siga estos pasos:</p>

<ol class="bcls-tasklist">
	<li>En tus <strong>styles.xml</strong> archivo, habilite el botón de imagen en imagen agregando el siguiente código:

	<pre class="line-numbers">
<code class="language-xml" translate="No">&lt;style name="BrightcoveControlBar" parent="BrightcoveControlBarDefault"&gt;
    &lt;item name="brightcove_picture_in_picture"&gt;true&lt;/item&gt;
&lt;/style&gt;</code></pre>
	</li>
	<li>En tus <strong>AndroidManifest.xml</strong> expediente, <a href="https://developer.android.com/guide/topics/ui/picture-in-picture.html#declaring">declarar imagen en soporte de imagen</a> para la actividad agregando lo siguiente:
	<pre class="line-numbers">
<code class="language-xml" translate="No">&lt;activity android:name="VideoActivity"
  android:resizeableActivity="true"
<span class="bcls-highlight">  android:supportsPictureInPicture="true"
  android:configChanges=
      "screenSize|smallestScreenSize|screenLayout|orientation"</span>
  ...
</code></pre>

	<p>Este es un paso importante. Si no lo declara, cuando un usuario presiona el botón de imagen en imagen en Brightcove Media Controller, un <code translate="No">IllegalStateException</code> será arrojado:</p>

	<pre>
<code class="language-java" translate="No">java.lang.IllegalStateException: enterPictureInPictureMode: Current activity does not support picture in picture</code></pre>
	</li>
</ol>

<p>Al entrar en la imagen en el modo de imagen, la actividad en sí cambia de tamaño, conservando todos los componentes de la actividad en la imagen en la ventana de imagen. Para evitar esto y proporcionar una implementación más fácil, la vista de video de Brightcove entrará en pantalla completa automáticamente para coincidir con el ancho y alto del diseño principal, mostrando solo el video en la imagen en la ventana de imagen. Una vez que salga de este modo, la vista de video de Brightcove volverá a su estado original.</p>

<p>Si no desea imagen en imagen en su aplicación, puede deshabilitar el botón de imagen en imagen agregando el siguiente código en su <strong>styles.xml</strong> expediente:</p>

<pre class="line-numbers">
<code class="language-xml" translate="No">&lt;style name="BrightcoveControlBar" parent="BrightcoveControlBarDefault"&gt;
    &lt;item name="brightcove_picture_in_picture"&gt;false&lt;/item&gt;
&lt;/style&gt;</code></pre>

<h3 id="Using_a_regular_Activity">Usar una actividad regular</h3>

<p>Si está utilizando una actividad que no se extiende <code translate="No">BrightcovePlayer</code> , además de declarar soporte para imagen en imagen como se menciona en la sección anterior, debe seguir algunos pasos adicionales:</p>

<ol class="bcls-tasklist__restart">
	<li>Abre el <strong>MainActivity.java</strong> expediente.</li>
	<li>En el <code translate="No">onCreate</code> método de la actividad, registre la actividad con Brightcove <code translate="No">PictureInPictureManager</code>:
	<pre>
<code class="language-java" translate="No">PictureInPictureManager.getInstance().registerActivity(Activity, BrightcoveVideoView)</code></pre>
	</li>
	<li>En el <code translate="No">onDestroy</code> método, anule el registro de la actividad:
	<pre>
<code class="language-java" translate="No">PictureInPictureManager.getInstance().unregisterActivity(Activity)</code></pre>
	</li>
	<li>Anular el <code translate="No">onPictureInPictureModeChanged</code> Método de actividad y llamar <code translate="No">onPictureInPictureModeChanged()</code> método como se muestra a continuación:
	<pre class="line-numbers">
<code class="language-java" translate="No">@Override
  public void onPictureInPictureModeChanged (boolean isInPictureInPictureMode, Configuration newConfig) {
     super.onPictureInPictureModeChanged(isInPictureInPictureMode, newConfig);
     PictureInPictureManager.getInstance().onPictureInPictureModeChanged(isInPictureInPictureMode, newConfig);
  }</code></pre>
	</li>
	<li>Finalmente, anule el <code translate="No">onUserLeaveHint()</code> Método de actividad y llamar <code translate="No">onUserLeaveHint()</code> Como se muestra abajo:
	<pre class="line-numbers">
<code class="language-java" translate="No">@Override
  public void onUserLeaveHint () {
     super.onUserLeaveHint();
     PictureInPictureManager.getInstance().onUserLeaveHint();
  }</code></pre>
	</li>
</ol>

<p>Después de seguir estos pasos, el botón de imagen en imagen aparecerá automáticamente en Brightcove Media Controller. También puede activar imagen en imagen mediante programación de la siguiente manera:</p>

<pre>
<code class="language-java" translate="No">PictureInPictureManager.getInstance().enterPictureInPictureMode()</code></pre>

<aside class="bcls-aside bcls-aside--information">Tenga en cuenta que llamar a este método arrojará un <code translate="No">PictureInPictureManagerException</code> si no se ha registrado una actividad.</aside>

<h3 id="Customizing_picture_in_picture">Personalización de imagen en imagen</h3>

<p>Puede personalizar el comportamiento y la apariencia de la imagen en la ventana de imagen a través del <code translate="No">PictureInPictureManager</code>. Por ejemplo, puede cambiar la relación de aspecto de la ventana o habilitar / deshabilitar los subtítulos para sus videos.</p>

<p>Android Oreo proporciona de forma nativa tres parámetros que se pueden personalizar:</p>

<ul>
	<li><a href="https://developer.android.com/reference/android/app/PictureInPictureParams.Builder.html#setAspectRatio(android.util.Rational)">relación de aspecto</a>

	<pre>
<code class="language-java" translate="No">setAspectRatio(Rational)</code></pre>
	</li>
	<li><a href="https://developer.android.com/reference/android/app/PictureInPictureParams.Builder.html#setSourceRectHint(android.graphics.Rect)">sugerencia de límites de fuente</a>
	<pre>
<code class="language-java" translate="No">setSourceRectHint(Rect)</code></pre>
	</li>
	<li><a href="https://developer.android.com/reference/android/app/PictureInPictureParams.Builder.html#setActions(java.util.List%3Candroid.app.RemoteAction%3E)">lista de acciones remotas</a>
	<pre>
<code class="language-java" translate="No">setUserActions(List&lt;RemoteAction&gt;)</code></pre>
	</li>
</ul>

<h4>Acciones del usuario</h4>

<p>Brightcove agrega un <code translate="No">RemoteAction</code> por defecto, que maneja el <code translate="No">Play/Pause</code> eventos de vídeo y establece sus respectivos iconos. Esto significa que el valor predeterminado <code translate="No">RemoteAction</code> se agregará a la lista de acciones remotas que establezca con lo siguiente:</p>

<pre>
<code class="language-java" translate="No">setUserActions</code></pre>

<p>Tenga en cuenta que solo puede establecer un número limitado de acciones. Para obtener el <a href="https://developer.android.com/reference/android/app/Activity.html#getMaxNumPictureInPictureActions()">número máximo de acciones</a> , llame a lo siguiente:</p>

<pre>
<code class="language-java" translate="No">Activity.getMaxNumPictureInPictureActions()</code></pre>

<h4>Subtítulos</h4>

<p>Puede habilitar / deshabilitar los subtítulos ocultos al reproducir un video en el modo Imagen en imagen llamando a lo siguiente en el <code translate="No">inPictureInPictureManager</code>.</p>

<pre>
<code class="language-java" translate="No">setClosedCaptionsEnabled(boolean)</code></pre>

<p>Los subtítulos ocultos están deshabilitados de forma predeterminada en los teléfonos, pero están habilitados en las tabletas. Para reducir el tamaño de los subtítulos mientras se reproduce en el modo Imagen en imagen, llame a lo siguiente para establecer un valor entre <code translate="No">0</code> y <code translate="No">1.0f</code>.</p>

<pre>
<code class="language-java" translate="No">setClosedCaptionsReductionScaleFactor(float)</code></pre>

<p>De forma predeterminada, el tamaño de los subtítulos ocultos en la imagen en el modo de imagen es <code translate="No">0.5f</code> o 50% del tamaño original. Por último, para ingresar la imagen en el modo de imagen cuando la actividad <code translate="No">onUserLeaveHint()</code> se llama, establezca lo siguiente en <code translate="No">true</code>:</p>

<pre>
<code class="language-java" translate="No">setOnUserLeaveEnable(boolean)</code></pre>

<h4>Parámetros</h4>

<p>Para recuperar la imagen actual en los parámetros de imagen, puede llamar a lo siguiente:</p>

<pre>
<code class="language-java" translate="No">PictureInPicture.getBrightcovePictureInPictureParams()</code></pre>

<p>Esta llamada devuelve el <code translate="No">BrightcovePictureInPictureParams</code> object, que tiene los getters para todos los parámetros discutidos anteriormente.</p>
</section>

<section class="bcls-section">
<h2 id="iOS_implementation">Implementación de iOS</h2>

<p>Para comenzar con imagen en imagen, agregue <code translate="No">showPictureInPictureButton</code> a <code translate="No">BCOVPUIPlayerViewOptions</code>. Cuando se establece en verdadero, se agregará un botón de imagen en imagen a los controles del reproductor en los dispositivos compatibles.</p>
<p>Imagen en imagen es una de las <a href="https://www.apple.com/ios/ios-14/features/">nuevas funciones con iOS 14</a>.</p>

<p>Para obtener más detalles, consulte lo siguiente:</p>

<ul>
	<li>La <a href="https://github.com/brightcove/brightcove-player-sdk-ios#PIP">Imagen en imagen</a> sección de referencia de Brightcove Native SDK para iOS</li>
	<li>De Apple <a href="https://developer.apple.com/documentation/avkit/adopting_picture_in_picture_in_a_custom_player">Adopción de imagen en imagen en un reproductor personalizado</a> documento</li>
</ul>

<p>Para ver un ejemplo de código, consulte el <a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/Player/VideoCloudBasicPlayer">Aplicación básica de reproducción de video</a>.</p>
</section>

<section class="bcls-section">
<h2 id="Limitations">Limitaciones</h2>

<h3>Androide</h3>

<ul>
	<li>Imagen en imagen solo funcionará en dispositivos con Android Oreo o superior</li>
	<li>Actualmente no es compatible con Android TV.</li>
	<li>Los videos con anuncios no son compatibles</li>
	<li>Los videos 360 no son compatibles</li>
</ul>

<h3>iOS</h3>

<ul>
	<li>Los videos con anuncios no son compatibles</li>
	<li>Los videos 360 no son compatibles</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Known_issues">Problemas conocidos</h2>

<h3>Androide</h3>

<ul>
	<li>Descubrimos que los videos protegidos por Widevine que se reproducen en modo imagen en imagen se volverán transparentes o negros en el Pixel C con Android 8.0. El problema no se puede reproducir en el mismo dispositivo con Android 8.1.</li>
</ul>
</section>
</article>