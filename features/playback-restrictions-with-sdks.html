---
title: "Restricciones de reproducción con los SDK nativos"
description: "En este tema, aprenderá a utilizar las restricciones de reproducción con los SDK nativos de Brightcove".
parent: Features 
grandparent: Home
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  
  <!-- <br/>
  <aside class="bcls-aside bcls-aside--tip">This feature is available for a specific set of customers with access to the Limited Availability phase of Brightcove Playback Restrictions.</aside> -->

  <section class="bcls-section">
    <h2 id="Introduction">Introducción</h2>
    <p>
      De forma predeterminada, los SDK nativos se comunican con la API de reproducción de Brightcove para recuperar el contenido de su video y lista de reproducción. Un nuevo sistema para administrar los derechos de reproducción y las restricciones se encuentra frente a la API de reproducción y proporciona autorización de reproducción mediante licencias DRM.
    </p>
    <p>Puede usar derechos de reproducción con o sin DRM, pero si elige usar restricciones de tiempo de ejecución, deberá usar un token web JSON (JWT).</p>
    <p>La protección de claves de licencia ofrece un nivel adicional de seguridad cuando se usa Dynamic Delivery con contenido protegido por DRM o HTTP Live Streaming Encryption (HLSe). Las solicitudes de licencia se pueden autenticar mediante un <a href="https://general.support.brightcove.com/developer/create-json-web-token.html">Token web JSON (JWT)</a>. </p>

    <p>El token se utiliza al solicitar la licencia de video, una vez que el video se ha cargado en el reproductor y se ha seleccionado la fuente.</p>

    <aside class="bcls-aside bcls-aside--information">Con el contenido de HLSe, cuando el reproductor cambia de interpretación, debido a una conectividad mejorada o después de que se carga el primer segmento, se realiza una nueva solicitud de licencia.</aside>

    <p>Si no está familiarizado con esta función, consulte la <a href="https://apis.support.brightcove.com/playback-restrictions/getting-started/overview-playback-restrictions.html">Descripción general: Restricciones de reproducción de Brightcove</a> documento.</p>
  </section>

  <section class="bcls-section">
    <h2 id="Requirements">Requisitos</h2>
    <p>Estos son los requisitos necesarios para utilizar las restricciones de reproducción.</p>
    <!-- <h3>Playback Rights</h3> -->
    <h4>Androide</h4>
    <ul>
      <li>Debe utilizar Brightcove Native SDK para la versión de Android <strong>6.11.0</strong> o después</li>
    </ul>
    <h4>iOS</h4>
    <ul><li>Debe utilizar Brightcove Native SDK para la versión de iOS <strong>6.7.0</strong> o después</li>
    </ul>

    <!-- <h3>License Keys Protection</h3>
    <p>To use License Keys Protection, you need the following:</p>
    <ul>
      <li>Player version <strong>6.33.0</strong> or later</li>
      <li>If using DRM, you will need the <a href="https://support.brightcove.com/configuring-brightcove-player-drm#Changelog">DRM plugin</a> version <strong>5.5.0</strong> or later</li>
    </ul> -->

  </section>

  <section class="bcls-section">
    <h2 id="Android_Using_Playback_Rights">Androide: Uso de derechos de reproducción</h2>
    <aside class="bcls-aside bcls-aside--information">Notas:
      <ul>
        <li>Con esta implementación, se ignorará cualquier restricción de contenido configurada con claves de política.</li>
        <li>En la plataforma Android, solo se admite DRM DASH</li>
      </ul>
    </aside>
    <p>
      Para realizar solicitudes de API de reproducción que verifiquen los derechos y restricciones de reproducción, siga estos pasos:
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>
          Empiece con el <a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/BasicSampleApp/src/main">Aplicación de muestra básica</a>.
        </p>
      </li>
      <li>
        <p>
          De forma predeterminada, el SDK nativo para Android realiza una solicitud a la API de reproducción si tiene una clave de política. Para utilizar los derechos de reproducción, no envíe la clave de política con su solicitud.
        </p>
        <p>
          Crea una instancia de <code translate="No">com.brightcove.player.edge.Catalog</code> sin proporcionar una clave de política. Aquí hay un ejemplo:
        </p>
        <pre>
<code class="language-java" translate="No">Catalog catalog = new Catalog.Builder(eventEmitter, accountId).build();</code></pre>
        <br />
        <p>
          Si está siguiendo la aplicación de muestra de Brightcove, obtiene el ID de cuenta como se muestra aquí:
        </p>
        <pre>
<code class="language-java" translate="No">getString(R.string.account)</code></pre>
        &lt;/ br /&gt;
      </li>
      <li>
        <p>
          <strong>Opcional</strong>: Si desea utilizar restricciones de tiempo de ejecución, debe crear un token JWT y pasarlo con la solicitud de catálogo.
        </p>
        <p>
          Para crear su token JWT, siga los pasos en el <a href="https://apis.support.brightcove.com/playback-restrictions/getting-started/overview-playback-restrictions.html#Runtime_restrictions">Restricciones de tiempo de ejecución</a> sección de la descripción general: Restricciones de reproducción de Brightcove documento.
        </p>
        <p>
          Para pasar su token con la solicitud de catálogo, consulte la <a href="#Using_License_Keys_Protection_Android">Uso de la protección de claves de licencia: Androide</a> sección.
        </p>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Android_Using_License_Keys_Protection">Androide: Uso de la protección de claves de licencia</h2>

    <p>El SDK nativo para Android actualmente admite la protección de clave / licencia para fuentes HLSe y Widevine DASH. Proporcionará su token de autorización como parte de la solicitud de catálogo de Brightcove para un solo video o una lista de reproducción.</p>

    <p>
      Para realizar una solicitud de catálogo de Brightcove, siga estos pasos:
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>
          Crear un <code translate="No">HttpRequestConfig</code> objeto y establezca el token de autorización de Brightcove como se muestra aquí:
        </p>
        <pre class="line-numbers"><code class="language-java" translate="No">HttpRequestConfig httpRequestConfig = new HttpRequestConfig.Builder()
  .setBrightcoveAuthorizationToken("<span class="bcls-input">your jwt token</span>")
  .build();
</code></pre>
        <p>
          El valor del token de autorización será el valor de su token web JSON.
        </p>
      </li>
      <li>
        <p>
          Una vez que haya creado el <code translate="No">HttpRequestConfig</code> objeto, páselo a uno de los siguientes métodos de catálogo:
        </p>
        <p>
          Para una solicitud de video, use uno de los siguientes:
        </p>
        <pre class="line-numbers"><code class="language-java" translate="No">findVideoByID(String, HttpRequestConfig, VideoListener)
</code></pre>
        <pre class="line-numbers"><code class="language-java" translate="No">findVideoByReferenceID(String, HttpRequestConfig, VideoListener)
</code></pre>
        <p>
          Para una solicitud de lista de reproducción, use uno de los siguientes:
        </p>
        <pre class="line-numbers"><code class="language-java" translate="No">findPlaylistByID(String, HttpRequestConfig, PlaylistListener)
</code></pre>
        <pre class="line-numbers"><code class="language-java" translate="No">findPlaylistByReferenceID(String, HttpRequestConfig, PlaylistListener)
</code></pre>
        <p>
          El SDK maneja los detalles del uso del token para la adquisición de licencias de HLSe y Widevine.
        </p>
        <aside class="bcls-aside bcls-aside--information">Para las solicitudes de lista de reproducción, todos los videos de la lista de reproducción deben usar el mismo token. En una versión futura, podrá asignar un token diferente a cada video en la lista de reproducción. Usted será responsable de mantener el mapeo entre la identificación de video y el token. los <code translate="No">conid</code> como se define en el <a href="https://general.support.brightcove.com/developer/create-json-web-token.html#Create_a_JSON_Web_Token">Reclamaciones de token JWT</a> es el valor de ID de video asociado con un token.</aside>
      </li>
    </ol>

    <h3>Ejemplo de código</h3>
    <p>
      A continuación, se muestra un ejemplo que muestra cómo pasar su token de autorización al realizar una solicitud de catálogo:
    </p>
    <pre class="line-numbers"><code class="language-java" translate="No">String myToken = &quot;...&quot;;
HttpRequestConfig httpRequestConfig = new HttpRequestConfig.Builder()
  .setBrightcoveAuthorizationToken(myToken)
  .build();
&hellip;

Catalog catalog = new Catalog(eventEmitter, accountId, policyKey, playbackApiBaseUrl);
catalog.findVideoByReferenceID(videoReferenceId, httpRequestConfig, new VideoListener(){...});
</code></pre>

    <h3>Reproducción sin conexión</h3>
    <p>
      El catálogo sin conexión <code translate="No">findVideo</code> , <code translate="No">requestPurchaseLicense</code> y <code translate="No">requestRentalLicense</code> todos los métodos toman un <code translate="No">HttpRequestConfig</code> como argumento.
    </p>
    <aside class="bcls-aside bcls-aside--tip">La protección de clave / licencia con reproducción sin conexión es compatible con el SDK nativo para Android v6.8.1 o posterior.</aside>
    <p>He aquí un ejemplo:</p>
    <pre class="line-numbers"><code class="language-java" translate="No">private HttpRequestConfig httpRequestConfig;
private String pasToken = &quot;<span class="bcls-input">your jwt token</span>&quot;;
...
HttpRequestConfig.Builder httpRequestConfigBuilder = new HttpRequestConfig.Builder();
httpRequestConfigBuilder.setBrightcoveAuthorizationToken(pasToken);
httpRequestConfig = httpRequestConfigBuilder.build();
playlist.findPlaylist(catalog, httpRequestConfig, new PlaylistListener() {
    @Override
    public void onPlaylist(Playlist playlist) {
        videoListAdapter.setVideoList(playlist.getVideos());
        onVideoListUpdated(false);
        brightcoveVideoView.addAll(playlist.getVideos());
    }

    @Override
    public void onError(String error) {
        String message = showToast(&quot;Failed to find playlist[%s]: %s&quot;, playlist.displayName, error);
        Log.w(TAG, message);
        onVideoListUpdated(true);
    }
});</code></pre>

    <p>
      Para obtener más detalles, consulte la <a href="https://github.com/BrightcoveOS/android-player-samples/blob/master/brightcove-exoplayer/OfflinePlaybackSampleApp/src/main/java/com/brightcove/player/samples/offlineplayback/MainActivity.java">Aplicación de muestra de reproducción sin conexión</a>.
    </p>

    <h3>Respuestas</h3>
    <p>
      Las siguientes respuestas están asociadas con PAS:
    </p>
    <ul>
      <li>
        200 - Se permite que la licencia continúe
      </li>
      <li>
        401 - No se debe permitir que la entrega de la licencia continúe
      </li>
    </ul>

    <!-- <h3>Limitations</h3>
    <p>
      There is a limitation with the current release:
    </p>
    <ul>
      <li>
        Chromecast is not supported with key/license protection.
      </li>
    </ul> -->
  </section>

  <section class="bcls-section">
    <h2 id="iOS_Using_Playback_Rights">iOS: Uso de derechos de reproducción</h2>
    <aside class="bcls-aside bcls-aside--information">Notas:
      <ul>
        <li>Con esta implementación, se ignorará cualquier restricción de contenido configurada con claves de política.</li>
      </ul>
    </aside>

    <p>
      Para realizar solicitudes de API de reproducción que verifiquen los derechos y restricciones de reproducción, siga estos pasos:
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>
          Empiece con el <a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/Player/VideoCloudBasicPlayer">Aplicación de muestra básica</a>.
        </p>
      </li>
      <li>
        <p>
          De forma predeterminada, el SDK nativo para iOS realiza una solicitud a la API de reproducción si tiene una clave de política. Para utilizar los derechos de reproducción, no envíe la clave de política con su solicitud.
        </p>
        <p>
          Crea una instancia de <code translate="No">BCOVPlaybackService</code> , estableciendo la clave de política en <code translate="No">nil</code>. Aquí hay un ejemplo:
        </p>
        <pre>
<code class="language-java" translate="No">let playbackService = BCOVPlaybackService(accountId: kViewControllerAccountID, policyKey: nil)</code></pre>
      </li>
      <li>
        <p>
          <strong>Opcional</strong>: Si desea utilizar restricciones de tiempo de ejecución, debe crear un token JWT y pasarlo con la solicitud de catálogo.
        </p>
        <p>
          Para crear su token JWT, siga los pasos en el <a href="https://apis.support.brightcove.com/playback-restrictions/getting-started/overview-playback-restrictions.html#Runtime_restrictions">Restricciones de tiempo de ejecución</a> sección de la descripción general: Restricciones de reproducción de Brightcove documento.
        </p>
        <p>
          Para pasar su token con la solicitud de catálogo, consulte la <a href="#Using_License_Keys_Protection_iOS">Uso de la protección de claves de licencia: iOS</a> sección.
        </p>
      </li>
    </ol>
  </section> 

  <section class="bcls-section">
    <h2 id="iOS_Using_License_Keys_Protection">iOS: Uso de la protección de claves de licencia</h2>

    <p>Cuando utilice la protección de clave / licencia, deberá utilizar los métodos del servicio de reproducción que le permitan pasar su token de autorización. Esto se hace usando el <code translate="No">authToken</code> parámetro.</p>

    <p>
      Para una solicitud de video, use uno de los siguientes:
    </p>
    <pre class="line-numbers"><code class="language-objectivec" translate="No">- (void)findVideoWithVideoID:(NSString *)videoID authToken:(NSString *)authToken parameters:(NSDictionary *)parameters completion:(void (^)(BCOVVideo *video, NSDictionary *jsonResponse, NSError *error))completionHandler;
</code></pre>
    <pre class="line-numbers"><code class="language-objectivec" translate="No">- (void)findVideoWithReferenceID:(NSString *)referenceID authToken:(NSString *)authToken parameters:(NSDictionary *)parameters completion:(void (^)(BCOVVideo *video, NSDictionary *jsonResponse, NSError *error))completionHandler;
</code></pre>

    <p>
      Para una solicitud de lista de reproducción, use uno de los siguientes:
    </p>
    <pre class="line-numbers"><code class="language-objectivec" translate="No">- (void)findPlaylistWithPlaylistID:(NSString *)playlistID authToken:(NSString *)authToken parameters:(NSDictionary *)parameters completion:(void (^)(BCOVPlaylist *playlist, NSDictionary *jsonResponse, NSError *error))completionHandler;
</code></pre>
    <pre class="line-numbers"><code class="language-objectivec" translate="No">- (void)findPlaylistWithReferenceID:(NSString *)referenceID authToken:(NSString *)authToken parameters:(NSDictionary *)parameters completion:(void (^)(BCOVPlaylist *playlist, NSDictionary *jsonResponse, NSError *error))completionHandler;
</code></pre>

    <p>
      Los detalles del uso del token para la adquisición de licencias de HLSe y FairPlay son manejados por el SDK.
    </p>
    <aside class="bcls-aside bcls-aside--information">Para las solicitudes de lista de reproducción, todos los videos de la lista de reproducción deben usar el mismo token. En una versión futura, podrá asignar un token diferente a cada video en la lista de reproducción. Usted será responsable de mantener el mapeo entre la identificación de video y el token. los <code translate="No">conid</code> como se define en el <a href="https://general.support.brightcove.com/developer/create-json-web-token.html#Create_a_JSON_Web_Token">Reclamaciones de token JWT</a> es el valor de ID de video asociado con un token.</aside>

    <p>
      Para obtener más detalles, consulte la <a href="/ios/reference/sdk/index.html#PlaybackAuthorizationService">Servicio de autorización de reproducción</a> sección del SDK nativo para referencia de iOS.
    </p>

    <h3>Reproducción sin conexión</h3>
    <p>
      Si está utilizando el servicio de autorización de reproducción con reproducción sin conexión, existe un nuevo método para renovar una licencia de FairPlay que acepta un token de autorización:
    </p>
    <pre class="line-numbers"><code class="language-objectivec" translate="No">// Request license renewal
    [BCOVOfflineVideoManager.sharedManager renewFairPlayLicense:offlineVideoToken
        video:video // recent video from Playback API or Playback Service class
        authToken: authToken
        Parameters: parameters
        completion:^(BCOVOfflineVideoToken offlineVideoToken, NSError *error)
    {
        // handle errors
    }];
</code></pre>

    <p>
      Cuando finalice la renovación de la licencia, el bloque de finalización se llamará con el mismo token de video sin conexión que se pasó. Un <code translate="No">NSError</code> indicará cualquier problema que haya ocurrido (o nulo si no hay error).
    </p>

    <p>
      Para obtener más detalles, consulte la <a href="https://github.com/brightcove/brightcove-player-sdk-ios/blob/master/OfflinePlayback.md#renewing-a-fairplay-license">Renovación de una licencia FairPlay</a> sección del SDK nativo para referencia de iOS.
    </p>

    <h3>Respuestas</h3>
    <p>
      Las siguientes respuestas están asociadas con PAS:
    </p>
    <ul>
      <li>
        200 - Se permite que la licencia continúe
      </li>
      <li>
        401 - No se debe permitir que la entrega de la licencia continúe
      </li>
    </ul>

  </section>

  <!-- <section class="bcls-section">
    <h2 id="Related_topics">Related topics</h2>
    <ul>
      <li>
        <a href="/playback-rights/getting-started/overview-epa.html">Overview: Playback Rights Management Service</a>
      </li>
      <li>
        <a href="/playback-rights/getting-started/implementing-epa.html">Implementing Playback Rights Management Service</a>
      </li>
      <li>
        <a href="/playback-rights/guides/using-epa-with-bcp.html">Using Playback Rights with Brightcove Player</a>
      </li>
      <li>
        <a href="/playback-authorization/guides/stream-concurrency.html">Implementing Stream Concurrency</a>
      </li>
    </ul>
  </section> -->

</article>