---
title: 'Anuncios pre-roll del lado del cliente con Live SSAI y los SDK nativos'
description: En este tema, aprenderá a usar los SDK nativos de Brightcove para reproducir anuncios pre-roll del lado del cliente con transmisiones en vivo habilitadas para la inserción de anuncios del lado del servidor (SSAI).
parent: Live 
grandparent: Features
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">Descripción general</h2>
<p>Al entregar transmisiones en vivo con inserción de anuncios del lado del servidor (SSAI), puede solicitar pausas publicitarias durante el video utilizando el módulo en vivo. Para obtener más detalles, consulte la <a href="/features/using-live-ssai-native-sdks.html">Uso de Live SSAI con los SDK nativos</a> documento.</p>
<p>
  También puede incluir un anuncio previo al video antes de que comience la transmisión en vivo. Aquí es cuando los espectadores están comprometidos y dispuestos a sentarse a ver un anuncio corto. Con esta función, puede insertar anuncios IMA pre-roll del lado del cliente.
</p>
</section>

<section class="bcls-section">
<h2 id="Requirements">Requisitos</h2>
<p>Los siguientes requisitos son necesarios para esta función:</p> 

<h3>Versión del SDK nativo de Brightcove</h3>
<ul>
  <li>
    SDK nativo para Android 6.10.0 o superior
  </li>
  <li>
    SDK nativo para iOS / tvOS 6.7.7 o superior
  </li>
</ul>
<h3>Plataforma</h3>
<ul>
  <li>
    Cuenta habilitada para entrega dinámica
  </li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Implementing_IMA_pre_roll_ads_with_Live_SSAI">Implementación de anuncios IMA pre-roll con Live SSAI</h2>
<p>Para reproducir un anuncio previo al video de IMA con una transmisión SSAI en vivo, siga estos pasos:</p>

<ol class="bcls-tasklist">
	<li>
    <p>
      Cree un evento en vivo habilitado para la inserción de anuncios del lado del servidor (SSAI). Para obtener más detalles, consulte lo siguiente:
    </p>
    <ul>
      <li>
        <a href="/features/using-live-ssai-native-sdks.html">Uso de Live SSAI con los SDK nativos</a>
      </li>
      <li>
        <a href="https://ssai.support.brightcove.com/live/guides/implementing-player-enhancements-live-ssai.html"> Implementación de mejoras de jugador para Live SSAI</a>
      </li>
    </ul>
  </li>
  <li>
    <p>
      Utilice el complemento IMA para habilitar los anuncios pre-roll del lado del cliente. Para obtener más detalles, consulte la <a href="/features/implementing-client-side-ads-native-sdks.html">Implementación de anuncios del lado del cliente con los SDK nativos</a> documento.
    </p>
    <aside class="bcls-aside bcls-aside--information">Se ignorarán los anuncios IMA mid-roll y post-roll.</aside>
  </li>
  <li>
    Comience a transmitir.
  </li>
	
</ol>
</section>

<section class="bcls-section">
<h2 id="Android_implementation">Implementación de Android</h2>

<!-- <p>You will need the following values to build your app using the Native SDK for Android:</p>
<ul>
	<li>Playback token</li>
	<li>Account Id</li>
	<li>Video Id</li>
	<li>Policy Key</li>
</ul>
<p>To get your Policy Key, review the <a href="https://apis.support.brightcove.com/policy/getting-started/overview-policy-api.html">Policy Keys</a> document.</p> -->

<p>Para esta función, utilizará los complementos IMA y SSAI:</p>
<ul>
  <li>
    <a href="/android/reference/javadoc/com/brightcove/ima/package-frame.html">Complemento de IMA</a>
  </li>
  <li>
    <a href="/android/reference/javadoc/com/brightcove/ssai/package-frame.html">Complemento SSAI</a>
  </li>
</ul>

<h3>Muestras de código</h3>
<p>Para implementar esta función, revise los siguientes ejemplos:</p>
<ul>
  <li>
    Transmisiones en vivo con SDK de Android (<a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/LiveSampleApp/src/main">LiveSampleApp</a>)
  </li>
  <li>
    SSAI con SDK de Android (<a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/BasicSsaiSampleApp">BasicSsaiSampleApp</a>)
  </li>
  <li>
    Anuncios IMA con SDK de Android (<a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/AdRulesIMASampleApp">AdRulesIMASampleApp</a>)
  </li>
</ul>

<details>
    <summary><h2 id="Example">Ejemplo</h2></summary>
    <p>A continuación, se muestra un ejemplo de código que combina anuncios previos al video en vivo, SSAI e IMA:</p>
    <pre><code class="language-java" translate="No">/**
 * We start by adding some variables that are focused on the CSAI integration:
 * Also make the EventEmitter a global variable, it will be needed in the setupGoogleIMA method below
 */
private EventEmitter eventEmitter;
private GoogleIMAComponent googleIMAComponent;
private String adRulesURL = &quot;YOUR_AD_RULES_URL&quot;;

private final String AD_CONFIG_ID_QUERY_PARAM_KEY = &quot;ad_config_id&quot;;

// Note that for live SSAI streams, the adConfigId will start with the string &quot;live.&quot;
// Ads will be injected into a live SSAI stream using the cue point API
private final String AD_CONFIG_ID_QUERY_PARAM_VALUE = &quot;YOUR_AD_CONFIG_ID&quot;;

private SSAIComponent plugin;

/**
 * The BasicSSAISampleApp's onCreateMethod, with the setupGoogleIMA method from the AdRulesImaSampleApp added
 */
@Override
protected void onCreate(Bundle savedInstanceState) {
    setContentView(R.layout.ssai_activity_main);
    brightcoveVideoView = (BrightcoveExoPlayerVideoView) findViewById(R.id.brightcove_video_view);
    super.onCreate(savedInstanceState);

    eventEmitter = brightcoveVideoView.getEventEmitter();

    // Here we use the same setupGoogleIMA method as found in the AdRulesImaSampleApp:
    setupGoogleIMA();

    final EventEmitter eventEmitter = brightcoveVideoView.getEventEmitter();
    Catalog catalog = new Catalog(eventEmitter, YOUR_ACCOUNT_ID, YOUR_POLICY_KEY);

    // Setup the error event handler for the SSAI plugin.
    registerErrorEventHandler();
    plugin = new SSAIComponent(this, brightcoveVideoView);

    View view = findViewById(R.id.ad_frame);
    if (view instanceof ViewGroup) {
        // Set the companion ad container,
        plugin.addCompanionContainer((ViewGroup) view);
    }

    // Set the HttpRequestConfig with the Ad Config Id configured in
    // your https://studio.brightcove.com account.
    HttpRequestConfig httpRequestConfig = new HttpRequestConfig.Builder()
            .addQueryParameter(AD_CONFIG_ID_QUERY_PARAM_KEY, AD_CONFIG_ID_QUERY_PARAM_VALUE)
            .build();

    catalog.findVideoByID(&quot;YOUR_VIDEO_ID&quot;, httpRequestConfig, new VideoListener() {
        @Override
        public void onVideo(Video video) {
            // The Video Sources will have a VMAP url which will be processed by the SSAI plugin,
            // If there is not a VMAP url, or if there are any requesting or parsing error,
            // an EventType.ERROR event will be emitted.
            plugin.processVideo(video);
        }
    });
}

// The setupGoogleIMA method, for reference:

/**
 * Setup the Brightcove IMA Plugin.
 */
private void setupGoogleIMA() {
    // Establish the Google IMA SDK factory instance.
    final ImaSdkFactory sdkFactory = ImaSdkFactory.getInstance();

    // Enable logging up ad start.
    eventEmitter.on(EventType.AD_STARTED, new EventListener() {
        @Override
        public void processEvent(Event event) {
            Log.v(TAG, event.getType());
        }
    });

    // Enable logging any failed attempts to play an ad.
    eventEmitter.on(GoogleIMAEventType.DID_FAIL_TO_PLAY_AD, new EventListener() {
        @Override
        public void processEvent(Event event) {
            Log.v(TAG, event.getType());
        }
    });

    // Enable Logging upon ad completion.
    eventEmitter.on(EventType.AD_COMPLETED, new EventListener() {
        @Override
        public void processEvent(Event event) {
            Log.v(TAG, event.getType());
        }
    });

    // Set up a listener for initializing AdsRequests. The Google
    // IMA plugin emits an ad request event as a result of
    // initializeAdsRequests() being called.
    eventEmitter.on(GoogleIMAEventType.ADS_REQUEST_FOR_VIDEO, new EventListener() {
        @Override
        public void processEvent(Event event) {
            // Create a container object for the ads to be presented.
            AdDisplayContainer container = sdkFactory.createAdDisplayContainer();
            container.setPlayer(googleIMAComponent.getVideoAdPlayer());
            container.setAdContainer(brightcoveVideoView);

            // Build an ads request object and point it to the ad
            // display container created above.
            AdsRequest adsRequest = sdkFactory.createAdsRequest();
            adsRequest.setAdTagUrl(adRulesURL);
            adsRequest.setAdDisplayContainer(container);

            ArrayList&lt;AdsRequest&gt; adsRequests = new ArrayList&lt;AdsRequest&gt;(1);
            adsRequests.add(adsRequest);

            // Respond to the event with the new ad requests.
            event.properties.put(GoogleIMAComponent.ADS_REQUESTS, adsRequests);
            eventEmitter.respond(event);
        }
    });

    // Create the Brightcove IMA Plugin and pass in the event
    // emitter so that the plugin can integrate with the SDK.
    googleIMAComponent = new GoogleIMAComponent(brightcoveVideoView, eventEmitter, true);
}
</code></pre>
</details>
</section>

<section class="bcls-section">
<h2 id="iOS_implementation">Implementación de iOS</h2>

<p>Para esta función, utilizará los complementos IMA y SSAI:</p>
<ul>
  <li>
    <a href="https://github.com/brightcove/brightcove-player-sdk-ios-ima">Complemento de IMA</a>
  </li>
  <li>
    <a href="https://github.com/brightcove/brightcove-player-sdk-ios-ssai">Complemento SSAI</a>
  </li>
</ul>

<h3>Muestras de código</h3>
<p>Para implementar esta función, revise los siguientes ejemplos:</p>
<ul>
  <li>
    Pre-roll de IMA con Live SSAI para iOS (<a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/SSAI/SLS_IMA-Player">SLS_IMA-Player</a>)
  </li>
  <li>
    Pre-roll de IMA con Live SSAI para tvOS (<a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/SSAI/SLS_IMA-tvOSPlayer">SLS_IMA-tvOSPlayer</a>)
  </li>
</ul>
<aside class="bcls-aside bcls-aside--tip">No es necesario ocultar los controles del reproductor cuando se muestra el pre-roll. Esto se debe a que los controles del reproductor se ocultan automáticamente mientras se muestran los controles IMA.</aside>
</section>
</article>