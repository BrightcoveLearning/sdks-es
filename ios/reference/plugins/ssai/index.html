<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>Referencia de Brightcove Native Player para iOS</title>

	<link rel="stylesheet" href="css/style.css">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1.4">
	<meta name="generator" content="appledoc 2.2.1 (build 1334)">
</head>
<body class="appledoc">
	<header>
		<div class="container" class="hide-in-xcode">
			
			<h1 id="library-title"> <a href="index.html">Reproductor nativo de Brightcove para iOS </a> </h1>

			<p id="developer-home">
				Brightcove<a href="index.html"></a>
			</p>
			
		</div>
	</header>

	<aside>
		<div class="container">
			<nav>
				<ul id="header-buttons" role="toolbar">
					<li><a href="hierarchy.html">Jerarquía</a></li>
				</ul>
			</nav>
		</div>
	</aside>

	<article>
		<div id="overview-contents" class="container">
			<div id="content">
				<main role="main">
					<h1 class="title">Referencia de Brightcove Native Player para iOS</h1>

					
					<div class="section section-overview index-overview">
						
						
						<h1>Complemento SSAI para Brightcove Player SDK para iOS, versión 6.9.0.1697</h1> <h1>Requisitos</h1>

<ul>
<li>Xcode 11.0+</li>
<li>ARCO</li>
</ul>


<h1>Plataformas compatibles</h1>

<p>iOS 11.0 y superior.</p>

<p>tvOS 11.0 y superior.</p>

<h1>Instalación</h1>

<p>El complemento SSAI para Brightcove Player SDK para iOS proporciona dos paquetes de instalación; un marco de biblioteca estático y un marco de biblioteca dinámico.</p>

<h2>CocoaPods</h2>

<p>Puedes usar <a href="http://cocoapods.org">CocoaPods</a> para agregar el complemento SSAI para Brightcove Player SDK a su proyecto. Puedes encontrar lo último <code>Brightcove-Player-SSAI</code> podspec <a href="https://github.com/brightcove/BrightcoveSpecs/tree/master/Brightcove-Player-SSAI">aquí</a>.</p>

<p>Ejemplo de marco dinámico:</p>

<p>`` fuente bash &lsquo;<a href="https://github.com/brightcove/BrightcoveSpecs.git" title="">https://github.com/brightcove/BrightcoveSpecs.git '</a></p>

<p>use_frameworks! plataforma: ios, &lsquo;11,0&rsquo;</p>

<p>objetivo &lsquo;MyVideoPlayer&rsquo; hacer vaina &lsquo;Brightcove-Player-SSAI&rsquo; final</p>

<p>Ejemplo de marco estático:</p>

<p>`` fuente bash &lsquo;https://github.com/brightcove/BrightcoveSpecs.git&rsquo;</p>

<p>use_frameworks! plataforma: ios, 11.0 '</p>

<p>objetivo &lsquo;MyVideoPlayer&rsquo; hacer vaina &lsquo;Brightcove-Player-SSAI-static&rsquo; final</p>

<p>Al actualizar su instalación,&rsquo;Es una buena idea actualizar la copia local de su repositorio BrightcoveSpecs para que tenga las últimas podspecs localmente, al igual que actualizaría su repositorio principal de CococaPods.</p>

<p>Normalmente, si usa <code>actualización de la vaina</code> en Terminal esto sucederá automáticamente, o alternativamente puede actualizar explícitamente con <code>actualización de repositorio de pod Brightcove</code>. (Su repositorio de BrightcoveSpecs puede tener un nombre diferente si lo agregó explícitamente a su lista de repositorios de podspecs).</p>

<h2>Manual</h2>

<p>Para agregar el complemento SSAI para Brightcove Player SDK a su proyecto manualmente:</p>

<ol>
<li>Instale la última versión del <a href="https://github.com/brightcove/brightcove-player-sdk-ios/releases">SDK de Brightcove Player</a>.</li>
<li>Descargue la última versión en zip del complemento BrightcoveSSAI de nuestro <a href="https://github.com/brightcove/brightcove-player-sdk-ios-ssai/releases">página de lanzamiento</a>.</li>
<li>Agregar <code>BrightcoveSSAI.framework</code> a su proyecto.</li>
<li>Sobre el &ldquo;Configuración de compilación&rdquo; pestaña del destino de su aplicación, asegúrese de que el &ldquo;Rutas de búsqueda del marco&rdquo; incluir la ruta al marco. Esto debería haberse hecho automáticamente a menos que el marco esté almacenado en un directorio raíz diferente al de su proyecto.</li>
<li>(Solo marco dinámico) En el &ldquo;General&rdquo; pestaña del destino de su aplicación, agregue &lsquo;BrightcoveSSAI.framework&rsquo; al &ldquo;Frameworks, bibliotecas, contenido incrustado&rdquo; sección.</li>
<li>(Solo marco dinámico) En el &ldquo;Fases de construcción&rdquo; pestaña, agregue un &ldquo;Ejecutar guión&rdquo; fase con el comando <code>bash ${BUILT_PRODUCTS_DIR}PS{FRAMEWORKS_FOLDER_PATH}/BrightcoveSSAI.framework/strip-frameworks.sh</code>. Cheque &ldquo;Ejecute el script solo al instalar&rdquo;. Esto eliminará las arquitecturas innecesarias de la compilación, lo cual es importante para el envío de la App Store.</li>
<li>(Solo marco estático) En el &ldquo;Configuración de compilación&rdquo; pestaña del destino de su aplicación, agregue <code>-ObjC</code> al &ldquo;Otras banderas del vinculador&rdquo; entorno de construcción.</li>
</ol>


<h2>Importaciones</h2>

<p>El complemento SSAI para Brightcove Player SDK para iOS se puede importar al código de diferentes formas; <code>@import BrightcoveSSAI;</code> , <code>#importar &lt;BrightcoveSSAI / BrightcoveSSAI.h&gt;</code> o <code>#import &lt;BrightcoveSSAI / [clase específica] .h&gt;</code>.</p>

<h1>Inicio rápido</h1>

<p>BrightcoveSSAI es un complemento para <a href="https://github.com/brightcove/brightcove-player-sdk-ios">SDK de Brightcove Player para iOS</a> que proporciona soporte para la inserción de anuncios del lado del servidor de Brightcove.</p>

<p>`` objc [1] <a href="Classes/BCOVSSAIAdComponentDisplayContainer.html">BCOVSSAIAdComponentDisplayContainer</a> * displayContainer = [[BCOVSSAIAdComponentDisplayContainer alloc] initWithCompanionSlots: @ []];</p>

<pre><code> BCOVPlayerSDKManager * manager = [BCOVPlayerSDKManager sharedManager]; </code></pre>

<p>  [2] identificación<BCOVPlaybackController> playbackController = [sdkManager createSSAIPlaybackController];</p>

<p>  [3] [playbackController addSessionConsumer: displayContainer];</p>

<p>  [4] [self.videoContainer addSubview: playbackController.view];</p>

<p>  [5] BCOVPlaybackService <em>playbackService = [[BCOVPlaybackService alloc] initWithAccountId: accoundId policyKey: policyKey]; [playbackService findVideoWithVideoID: parámetros de videoID: @{ kBCOVPlaybackServiceParamaterKeyAdConfigId: &lt;valid-ad-config-id&gt; } finalización: ^ (BCOVVideo </em>video, NSDictionary <em>jsonResponse, NSError </em>error) {</p>

<p>  [6] [playbackController setVideos: @ [video]]; [reproducción del controlador de reproducción];</p>

<pre><code>}]; </code></pre>

<pre><code> Para resumir: 1. Primero cree un `BCOVSSAIAdComponentDisplayContainer`. Este objeto ayudará a administrar los espacios complementarios. Pase los espacios complementarios que tiene, si los hay. 1. BrightcoveSSAI agrega algunos métodos de categoría a `BCOVPlaybackManager`. El primero de ellos es `-createSSAIPlaybackControllerWithViewStrategy:`. Utilice este método para crear su controlador de reproducción. Normalmente pasará "nil" para la estrategia de visualización. 1. Para que `BCOVSSAIAdComponentDisplayContainer` muestre información del anuncio y complete las vistas de anuncios complementarios, debe agregarse como consumidor de sesión. 1. Agregue la vista del controlador de reproducción al contenedor de video en su propia jerarquía de vista. 1. Solicite el video o la lista de reproducción al Servicio de reproducción. Cuando utilice una URL VMAP estilo Unicorn Once, cree el objeto BCOVVideo directamente usando `[BCOVVideo videoWithURL: &lt;unicorn-style-url&gt;]`. 1. Cargue el video en el controlador de reproducción. Usando una URL de origen VMAP personalizada ======= Si tiene una URL de origen VMAP personalizada y no necesita usar el `BCOVPlaybackService`, puede crear manualmente un` BCOVVideo` con su URL como esta: </code></pre>

<p>BCOVVideo * video = [BCOVVideo videoWithURL: [NSURL URLWithString: @&ldquo;https://sdks.support.brightcove.com/assets/ads/ssai/sample-vmap.xml&rdquo;]]; [self.playbackController setVideos: @ [video]]; ''</p>

<h1>Usar datos XML de VMAP</h1>

<p>Si tiene datos XML de VMAP, puede crear manualmente un <code>BCOVVídeo</code> con tus datos así:</p>

<pre><code>// Si usa FairPlay DRM, necesitará construir el diccionario key_systems // de lo contrario, puede pasar `nil` para el valor de las propiedades. Propiedades NSDictionary * = @{ @"key_systems": @{ @"com.apple.fps.1_0": @{ @"key_request_url": @"&lt;insert key request URL&gt;", @"certificate_url": @"&lt;insert certificate URL&gt;" } }}; BCOVSource * source = [[BCOVSource alloc] initWithVMAPXMLData: vmapData propiedades: propiedades]; BCOVVideo * video = [[BCOVVideo alloc] initWithSource: fuente cuePoints: nil propiedades: nil]; [self.playbackController setVideos: @ [video]]; </code></pre>

<h1>Obtención de información sobre la reproducción de anuncios</h1>

<p>BrightcoveSSAI proporciona información sobre la reproducción de anuncios a través del <code>BCOVPlaybackControllerAdsDelegate</code>. Por ejemplo, si desea ocultar sus controles durante un anuncio, puede implementar <code> [BCOVPlaybackControllerAdsDelegate playbackController: playbackSession: didEnterAdSequence:]</code> para esconderlos.</p>

<p>Para obtener más información sobre cómo utilizar estos métodos delegados, consulte <a href="https://github.com/brightcove/brightcove-player-sdk-ios">SDK de Brightcove Player para iOS</a>.</p>

<h1>Buscando</h1>

<p>El complemento BrightcoveSSAI proporciona una función de búsqueda que debe usarse al implementar controles. Esta función de búsqueda se expone en la sesión a través del <code>proveedorExtensión</code> propiedad. Así es como se usa:</p>

<p>`` objc  <br/>
CMTime contentTimeToSeekTo = &lt;calculation-from-scrub-bar&gt;; [self.currentSession.providerExtension ssai_seekToTime: contentTimeToSeekTo deploymentHandler: ^ (BOOL terminado) {</p>

<p>  si (terminado) { [self.currentSession.player play]; }</p>

<p>}]; ''</p>

<p>los <code>CompletionHandler</code> se ejecutará al completar una búsqueda exitosa. No se ejecutará si una búsqueda ya fue iniciada por una llamada anterior a <code>[BCOVSessionProviderExtension ssai_seekToTime: CompletionHandler:]</code> o si se está reproduciendo un anuncio. Para probar si se puede realizar un intento de búsqueda, <code>[BCOVSessionProviderExtension ssai_canSeek]</code> propiedad. Para obtener más información sobre estos dos métodos, asegúrese de leer el <a href="[https://github.com/brightcove/brightcove-player-sdk-ios-ssai/blob/master/ios/static/BrightcoveSSAI.framework/Headers/BCOVSSAIComponent.h](https://github.com/brightcove/brightcove-player-sdk-ios-ssai/blob/master/ios/static/BrightcoveSSAI.framework/Headers/BCOVSSAIComponent.h)">headerdoc</a>.</p>

<h1>Buscar sin anuncios</h1>

<p>BrightcovePlayerSDK proporciona la <code>adsDisabled</code> Propiedad BOOL para deshabilitar anuncios durante la búsqueda, lo que permite que una aplicación reanude la reproducción sin requerir que el usuario final vea los anuncios reproducidos anteriormente.</p>

<p>En preparación para la búsqueda, inhabilite <code>auto-reproducción</code> al configurar el <code>BCOVPlaybackController</code>.</p>

<p>La lógica de inhabilitación de anuncios debe agregarse a la <code>kBCOVPlaybackSessionLifecycleEventReady</code> manejador de la <code>-playbackController: playbackSession: didReceiveLifecycleEvent:</code> método de tu <code>BCOVPlaybackController</code> delegar.</p>

<p>`` `objc - (void) control de reproducción: (id<BCOVPlaybackController>) controlador de reproducción Sesión: (id<BCOVPlaybackSession>) sesión didReceiveLifecycleEvent: (BCOVPlaybackSessionLifecycleEvent *) lifecycleEvent {if ([kBCOVPlaybackSessionLifecycleEventReady isEqualToString: lifecycleEvent.eventType]) {// deshabilitar anuncios. _playbackController.adsDisabled = SÍ;</p>

<pre><code>// busca en algún lugar del contenido del video. [session.providerExtension ssai_seekToTime: resumeTime deploymentHandler: ^ (BOOL terminado) { // re-enable ads. _playbackController.adsDisabled = NO; // open the shutter. _playbackController.shutterFadeTime = 0.25; _playbackController.shutter = NO; }]; </code></pre>

<p>} `` `</p>

<p>Al llamar <code>ssai_seekToTime: CompletionHandler:</code> para reanudar la reproducción en un momento determinado, es posible que el primer fotograma del vídeo esté visible hasta que se complete la búsqueda. Para una presentación más limpia, cubra temporalmente la vista de video durante la búsqueda configurando el <code>obturador</code> propiedad de BCOVPlabackController para <code>SÍ</code> antes de llamar <code>-setVideos:</code>. Cuando finalice la búsqueda, cierre el obturador configurando el <code>obturador</code> propiedad a <code>NO</code>. los <code>obturadorFadeTime</code> La propiedad define la duración de la animación de atenuación del obturador.</p>

<p>`` `objc self.playbackController = [sdkManager createSSAIPlaybackController];</p>

<p>// activa el obturador antes de cargar el video. self.playbackController.shutterFadeTime = 0.0; self.playbackController.shutter = SÍ;</p>

<p>// carga el video. ''</p>

<p>Tenga en cuenta que, por motivos de rendimiento, las pequeñas tolerancias están integradas en la búsqueda de vídeo. Una búsqueda en una posición de la cabeza lectora de contenido que está cerca del comienzo de una secuencia de anuncios puede resultar en una búsqueda al comienzo de la secuencia de anuncios. Si la reproducción automática es NO en este caso, AVPlayer se detendrá en el primer fotograma de la secuencia de anuncios.</p>

<h1>Controles integrados de la interfaz de usuario del jugador</h1>

<p>BrightcovePlayerSDK proporciona un conjunto integrado de controles de interfaz de usuario que se pueden usar con el complemento SSAI tanto para la reproducción básica como para los controles de anuncios. Para usar los controles, cree un <code>BCOVPUIPlayerView</code> y asócielo con su controlador de reproducción SSAI.</p>

<p>Primero, cree una propiedad playerView en su clase.</p>

<p><code>objc @property (no atómico) BCOVPUIPlayerView * playerView; </code></p>

<p>Crea el <code>BCOVPUIPlayerView</code> instancia y guarde una referencia al objeto.</p>

<p><code>objc BCOVPUIBasicControlView * controlView = [BCOVPUIBasicControlView basicControlViewWithVODLayout]; self.playerView = [[BCOVPUIPlayerView alloc] initWithPlaybackController: ninguna opción: ninguna controlView: controlView]; // Inserte el playerView en su propia vista de video. [self.videoContainer addSubview: self.playerView]; </code></p>

<p>usted&rsquo;Necesitará configurar el diseño para la vista del jugador, puede hacerlo con Auto Layout o con el método anterior Springs &amp; Struts.</p>

<p><strong>Resortes y puntales</strong></p>

<p>Configure su marco para que coincida con su vista de contenedor, luego agregue la vista de jugador a la vista de contenedor en su jerarquía de vista. Tenga en cuenta que <code>videoContainer</code> es su propio objeto de vista en su aplicación&rsquo;diseño de s.</p>

<p><code>objc self.playerView.frame = self.videoContainer.bounds; self.playerView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth; </code></p>

<p><strong>Diseño automático</strong></p>

<p><code>objc self.playerView.translatesAutoresizingMaskIntoConstraints = NO; [NSLayoutConstraint activeConstraints: @ [[self.playerView.topAnchor constraintEqualToAnchor: self.videoContainer.topAnchor], [self.playerView.rightAnchor constraintEqualToAnchor: self.videoContainer.rightAnchor], [self.playerTochorView.left.Anchor constraint , [self.playerView.bottomAnchor constraintEqualToAnchor: self.videoContainer.bottomAnchor],]]; </code> Ahora crea el <code>BCOVPlaybackController</code> , asígnelo a su vista de reproductor y luego comience a reproducir videos.</p>

<p>`` `objc // Inicializar ranuras complementarias <a href="Classes/BCOVSSAIAdComponentDisplayContainer.html">BCOVSSAIAdComponentDisplayContainer</a> * displayContainer = [[BCOVSSAIAdComponentDisplayContainer alloc] initWithCompanionSlots: @ []];</p>

<p>// Crea el controlador de reproducción BCOVPlayerSDKManager * manager = [BCOVPlayerSDKManager sharedManager]; identificación<BCOVPlaybackController> playbackController = [sdkManager createSSAIPlaybackControllerWithViewStrategy: nil];</p>

<p>// Escuche los mensajes de anuncios de display / complementarios [playbackController addSessionConsumer: displayContainer];</p>

<p>// Dile a la vista del jugador que este es el controlador de reproducción que&rsquo;estás usando self.playerView.playbackController = playbackController;</p>

<p>// Crea y reproduce tu video. Para URL de VMAP estilo Unicorn Once, cree el objeto BCOVVideo directamente. BCOVPlaybackService <em>playbackService = [[BCOVPlaybackService alloc] initWithAccountId: accoundId policyKey: policyKey]; [playbackService findVideoWithVideoID: parámetros de videoID:{ kBCOVPlaybackServiceParamaterKeyAdConfigId: &lt;valid-ad-config-id&gt; } finalización: ^ (BCOVVideo </em>video, NSDictionary <em>jsonResponse, NSError </em>error) {</p>

<pre><code>[playbackController setVideos: @ [video]]; [reproducción del controlador de reproducción]; }]; </code></pre>

<pre><code> Consulte el archivo README en BrightcovePlayerSDK para obtener más detalles sobre cómo usar y personalizar los controles de PlayerUI. Acceso a los datos de respuesta de VMAP ========================== Si desea acceder a los datos de respuesta de VMAP, puede suscribirse a la notificación `kBCOVSSAIVMAPResponseReceivedNotification`. Una vez recibida, el diccionario userInfo de la notificación contendrá la respuesta VMAP como NSData. Puede utilizar la constante `kBCOVSSAIVMAPResponseReceivedNotificationDataUserInfoKey` para acceder a ella desde userInfo. Dado que puede tener múltiples controladores de reproducción y, por lo tanto, múltiples respuestas VMAP, puede verificar el objeto de la notificación, `id playbackController = notification.object` para verificar para qué video son los datos VMAP. Además, cuando se suscribe a la notificación, puede configurar un controlador de reproducción como objeto para que solo se reciban notificaciones de datos VMAP con respecto a ese controlador de reproducción. Por ejemplo: `` `objc [[NSNotificationCenter defaultCenter] addObserver: self selector: @selector (vmapResponseReceived :) nombre: kBCOVSSAIVMAPResponseReceivedNotification objeto: self.playbackController]; </code></pre>

<p>También puede acceder a los datos de respuesta de VMAP a través del <code>BCOVOUXSesión</code> objeto:</p>

<pre><code>// Obj-C - (void) playbackController: (id &lt;BCOVPlaybackController&gt;) controller didAdvanceToPlaybackSession: (id &lt;BCOVPlaybackSession&gt;) sesión { if ([session respondsToSelector:NSSelectorFromString(@"vmapResponseData")]) { NSData *vmapResponseData = [(NSObject *)session valueForKeyPath:@"vmapResponseData"]; NSString *xmlString = [[NSString alloc] initWithData:vmapResponseData encoding:NSUTF8StringEncoding]; NSLog(@"VMAP XML: %@", xmlString); } } </code></pre>

<pre><code>// Control de reproducción Swift func (_ controlador: BCOVPlaybackController !, didAdvanceTo sesión: BCOVPlaybackSession!) { if (session.responds(to: NSSelectorFromString("vmapResponseData"))) { let vmapResponseData = (session as? NSObject)?.value(forKeyPath: "vmapResponseData") as? Data var xmlString: String? = nil if let vmapResponseData = vmapResponseData { xmlString = String(data: vmapResponseData, encoding: .utf8) } print ("VMAP XML: \\ (xmlString ??" ")")}} </code></pre>

<h1>Problemas conocidos</h1>

<ul>
<li><p>Debido a que tvOS no admite la navegación web, los anuncios complementarios, más información y todos los clics en anuncios se ignoran en esa plataforma.</p></li>
<li><p>No puede utilizar BrightcoveSSAI con ningún otro complemento de Brightcove, excepto el complemento BrightcoveFairPlay o el complemento BrightcoveIMA (solo para anuncios pre-roll).</p></li>
<li><p>Si desea utilizar el complemento BrightcoveSSAI junto con el complemento BrightcoveFairPlay, entonces el complemento BrightcoveFairPlay debe ser el <code>upstreamSessionProvider</code> del proveedor de sesión SSAI.</p></li>
<li><p>El complemento SSAI no admite la reproducción de contenido que no sea SSAI. Si necesita reproducir contenido que no sea SSAI, debe crear otro controlador de reproducción que no utilice el complemento SSAI.</p></li>
</ul>


<h1>Apoyo</h1>

<p>Si tiene preguntas, necesita ayuda o desea enviar comentarios, utilice el <a href="https://supportportal.brightcove.com/s/login/">Portal de soporte</a> o comuníquese con su administrador de cuentas. Para recibir una notificación de las nuevas versiones del software SDK, suscríbase a los SDK de Brightcove Native Player <a href="https://groups.google.com/g/brightcove-native-player-sdks">Grupo de Google</a>.</p>
						
						
					</div>
					

					<div class="index-container">
						

						
						<div class="index-column">
							<h2 class="index-title">Referencias de clase</h2>
							<ul>
								
								<li>BCOVSSAIAdComponentDisplayContainer<a href="Classes/BCOVSSAIAdComponentDisplayContainer.html"></a></li>
								
								<li>BCOVSSAICompanionSlot<a href="Classes/BCOVSSAICompanionSlot.html"></a></li>
								
							</ul>
						</div>
						

						
						<div class="index-column">
							
							<h2 class="index-title">Referencias de protocolo</h2>
							<ul>
								
								<li>BCOVSSAIAdComponentDelegate<a href="Protocols/BCOVSSAIAdComponentDelegate.html"></a></li>
								
							</ul>
							

							

							
							<h2 class="index-title">Referencias de categoría</h2>
							<ul>
								
								<li><a href="Categories/BCOVPlayerSDKManager-BCOVSSAIAdditions.html">BCOVPlayerSDKManager (BCOVSSAIAdditions)</a></li>
								
								<li><a href="Categories/BCOVSessionProviderExtension-BCOVSSAIAdditions.html">BCOVSessionProviderExtension (BCOVSSAIAdditions)</a></li>
								
								<li><a href="Categories/BCOVSource-BCOVSSAIAdditions.html">BCOVSource (BCOVSSAIAdditions)</a></li>
								
							</ul>
							
						</div>
						
					</div>

					<footer>
						<div class="footer-copyright">
							
							<p class="copyright">Derechos de autor &copy; 2021 Brightcove. Reservados todos los derechos. Actualizado: 2021-07-08</p>
							
							
							<p class="generator">Generado por <a href="http://appledoc.gentlebytes.com">appledoc 2.2.1 (compilación 1334)</a>.</p>
							
						</div>
					</footer>
				</main>
			</div>
		</div>
	</article>

	<script src="js/script.js"></script>
</body>
</html>
